\chapter{Strengir}\index{Strengir}\label{k:strengir}
Til þess að geta sýnt og notað texta þarf gagnatýpu til að halda utan um hann. Í flestum forritunarmálum, og Python er ekki undantekning, eru gögn af þeirri týpu kölluð \textbf{strengir}.
Lykilorð fyrir þessa týpu er \textbf{str}.

\section{Strengir skilgreindir}\index{Strengir skilgreindir}
Til þess að afmarka texta og segja vélinni að fara með hann sem af týpunni strengur þarf að nota tákn.
Við þurftum ekki að gera það þegar við skrifuðum tölurnar en nú, og seinna, notum við ákveðin tákn fyrir ákveðnar týpur.

Táknin sem skilgreina strengi eru gæsalappir.
Einfaldar gæsalappir eru úrfellingakomman sem venjulega er lengst til hægri á lyklaborði, tvöfaldar gæsalappir eru sér tákn sem er venjulega á sama takka og 2.
Einnig er hægt að gera streng með þremur einföldum gæsalöppum.´

\begin{lstlisting}[caption=Strengir skilgreindir]
# Fyrsti strengurinn okkar
"halló"

#strengur geymdur í breytu
textinn_minn = "halló ég má skrifa mörg orð inn í þessar gæsalappir"

einfaldar_gaesalappir = 'ég má líka skrifa innan einfaldra gæsalappa'

thetta_virkar_ekki = 'gæsalappirnar þurfa að passa saman" 

# og ef ég vil skrifa mjög langan texta nota ég þrjár gæsalappir
langi_textinn_minn = ''' ég má skrifa eins langa setningu hér og ég vil því að þetta verður alltaf álitið sem ein lína, hins vegar ef ég nota öðruvísi gæsalappir og langar að gera kóðan læsilegan er hægt að brjóta hann upp án þess að nota þessar þreföldugæsalappir, við sjáum það eftir smá'''
\end{lstlisting}

Í sumum forritunarmálum er munur á því að nota einfaldar og gæsalappir, þar sem einfaldar eru notaðar fyrir staka stafi (sér gagnatýpa) og tvöfaldar fyrir strengi.
En það er enginn raun munur á því hvernig Python meðhöndlar þær.

\section{Strengir og reikniaðgerðir}\index{Strengir og reikniaðgerðir}
Við erum búin að sjá að það megi leggja tölur saman og margfalda þær.
Nú ætlum við að skoða hvaða reikniaðgerðir er hægt að framkvæma með strengi og hvaða áhrif það hefur.
\comment{
\todo{vísa í vinnubók inni í þessum kóðabút}

\begin{lstlisting}[caption=Strengir og reikniaðgerðir]

# Reikniaðgerðirnar sem við þekkjum eru +, -, *, /, //, **, og %
# Lesandinn er hvattur til þess að gera prófanir á þessu í vinnubók upp á eigin spýtur
# Með því að skilgreina streng og reyna að nota reikniaðgerð á hann með tölum eða öðrum strengjum


# Gerum ráð fyrir að þessar prófanir hafi átt sér stað og niðurstaðan sé sú að þær aðgerðir sem hægt er að framkvæma eru + og *
# En hvað gerist þegar við notum þær?

\end{lstlisting}
}

Þegar við notum + til að setja saman strengi þá erum við að beita \textit{samskeytingu} (e. concatenation).
Samskeyting þýðir að einum streng er bætt við fyrir aftan annan streng.
Það skiptir máli hvor er fyrir framan: \texttt{"halló" + "bless"} verður að \texttt{"hallóbless"} en \texttt{"bless" + "halló"} verður að \texttt{"blesshalló"}.

\begin{lstlisting}[caption=Samskeyting strengja]

strengur_a = "þetta er a strengurinn minn"
strengur_b = " og þetta er b strengurinn minn"

# Nú get ég sameinað þessa strengi með því að setja annan þeirra fyrir aftan hinn
sameinadir_a_og_b = a + b

# ef við prentum út strenginn fáum við 
"þetta er a strengurinn minn og þetta er b strengurinn minn"
#takið eftir að það er bil á milli strengjanna, það er eingungis vegna þess að b strengurinn er skilgreindur þannig að fyrst kemur bil fremst í strengnum

# röðin skiptir máli þegar strengir eru sameinaðir svona
sameinadir_b_og_a = b + a

# þetta útprentað skilar okkur:
" og þetta er b strengurinn minnþetta er a strengurinn minn"

# Takið eftir að þarna er ekkert bil á milli strengjanna.

# Hægt er að komast framhjá því svona:
fyrsta_nafn = "Valborg"
seinna_nafn = "Sturludóttir"
fullt_nafn = fyrsta_nafn + " " + seinna_nafn

# Þarna sameinaði ég þrjá strengi þar sem ég vissi að hvorugur strengjanna minna innihéldi bil ákvað ég að setja það á milli með auka samskeytingu.
\end{lstlisting}

Þegar við notum * til þess að margfalda streng erum við að \textit{lengja} (e. multiply) hann.
Strengjalenging virkar þannig að þú tilgreinir hversu oft, í heilum tölum, þú vilt að strengurinn sé endurtekinn.

\begin{lstlisting}[caption=Strengjalenging]
eitt_ord = "kex"
eitt_ord*3

# skilar okkur
"kexkexkex"
\end{lstlisting}

\section{Vísar í streng}\index{Vísar í streng}
Strengir eru af einhverri lengd, við getum séð hversu mörg stafabil eru í streng með því að telja þau sjálf eða láta tölvuna segja okkur það með innbyggða fallinu len() (fyrir length).

\begin{lstlisting}[caption=Stafabilafjöldi, label=lst:stafabil]
strengur1 = "kex"
# þessi strengur er augljóslega þrjú stafabil
len(strengur1) 
# skilar okkur 3

strengur2 = "kex með smjöri, osti og sultu"
len(strengur2)
# skilar okkur 29, takið eftir að tóm bil og greinamerki teljast með
\end{lstlisting}

Nú þegar við vitum hversu mörg stafabil eru í strengnum getum við notað þau.
Við getum sagt við vélina mig langar til að fá vísi (e. index) (einnig kallað sætisnúmer, sæti og stæði) númer 1 og séð hvaða tákn er í þeim vísi.
Til að ná í eitthvað upp úr streng þurfum við að nota hornklofa (e. square brackets), tákn sem eru eins og kassalaga svigar [ og ].
Við notum þessi tákn í Python til að ná í gögn upp úr einhverri gagnagrind, sjáum nánari útskýringu á því fyrirbæri í kaflanum \ref{k:listar}.
Nú lítum við svo á að strengir séu til þess að geyma fyrir okkur tákn í ákveðinni röð og við getum nálgast þessi tákn með því að nota hornklofa.
Inn í hornklofann ætlum við að láta þann vísi (eða það sætisnúmer) sem við viljum vinna með.

\begin{lstlisting}[caption=Vísir 1, label=lst:stafbil2]
strengur = "kex"
# þessi strengur er augljóslega þrjú stafabil

print(strengur[1])

# þetta skilar okkur stafnum 'e'
\end{lstlisting}

Eins og sést í kóðabút \ref{lst:stafabil2} þá vísar vísir númer 1 ekki á fremsta stafinn sem er í þessu tilfelli k heldur vísar hann á stafinn e.
Það er vegna þess að í Python og flestum öðrum forritunarmálum (ekki öllum) er byrjað að telja í núll.
Þannig að fremsti vísirinn í streng (og öðrum gagnagrindum) er núllti vísirinn.
Hver er þá síðasti vísirinn?
Nú höfum við komist að þeirri niðurstöðu (í kóðabút \ref{lst:stafabil}) að strengurinn "kex" hefur þrjú stafabil, að það séu þrír sætisvísar í strengnum, að k sé í vísi 0, e sé í vísi 1 og þá hlýtur x að vera í vísi 2.
Síðasti vísirinn í streng er því einum lægri heldur en lengdin á strengnum.
Þannig að strengur af lengdinni fimm, eins og strengurinn "texti", hefur fimm stafabil sem eru í vísum númer 0,1,2,3 og 4.

\subsection{Óbreytanleiki}
Nú höfum við séð að það er hægt að sækja stafabil í streng, eins og tildæmi núllt táknið í strengnum.
Þá er mikilvægt að hafa í huga að í Python er ekki leyfilegt að endurskilgreina hluta úr streng.
Byrjum á því að skoða hvað endurskilgreining þýðir.
Ef við búum til breytu eins og í kóðabút \ref{lst:reiknivirkjagildisveiting} og notum nafnið á henni aftur til að segja vélinni að endurnýta minnissvæði með ákveðnu nafni.
Þá erum við búin að endurskilgreina breytuna okkar, hún var eitthvað áður en nú er hún eitthvað annað.

Þar sem strengir eru með ákveðin númeraða vísa sem benda á ákveðin tákn gætum við þá ekki bara sagt við vélina ,,mig langar að breyta bara tákni númer 0''?
Það er ekki í boði því að í Python eru strengir óbreytanlegir (e. immutable) og því er bara hægt að vinna með þá eins og þeir eru eða endurskilgreina þá alveg.

\subsection{Neikvæðir vísar}
Það má einnig telja frá hægri til vinstri.
Ef okkur langar að vinna með öftustu stökin í streng þurfum við ekki að vita hvað strengurinn er langur, við getum talið frá hægri endanum og unnið með neikvæða vísa.
Í því tilfelli byrjum við ekki að telja í 0, því það væri tvírætt (e. ambiguous).
Tölvan myndi ekki vita hvorn 0 vísinn við værum að biðja um þegar við segðum \texttt{strengur[0]}, hvort við værum að tala um núll frá vinstri eða hægri.
Þess vegna byrjum við að telja frá hægri í -1, og höldum þannig áfram þar til við erum komin niður í -n þar sem n er lengdin á strengnum.
Svo strengurinn "kex" er með vísana 0,1 og 2 en einnig vísana -3, -2 og -1 bæði í þessari röð, svo vísir -1 er alltaf síðasta táknið í streng.

\subsection{Hlutstrengir}
Nú vitum við hvernig á að sækja eitt stakt tákn upp úr streng.
En hvernig náum við í einhvern hluta úr honum?
Það er einnig gert með hornklofunum og við notum þá með ákveðnum hætti, við fáum að setja inn fleiri upplýsingar heldur en bara hvaða staka vísi við viljum.
Við notum vísana svona: [vísir sem á að byrja fyrir framan : vísir sem á að hætta fyrir framan: stærð á skrefi sem á að taka við lesturinn].
Þarna eru semsagt tveir tvípunktar sem er verið að nota og tölurnar sem koma á milli þeirra er afmörkunin á því hvað við viljum lesa upp úr tilteknum streng.
Nú er vert að nefna að þegar við notum þessa málskipan eru ákveðin gildi sjálfgefin, það er við þurfum ekki að taka þau fram.

Sjálfgefin gildi við að ná í hlutstreng:
\begin{enumerate}
	\item vísirinn sem við byrjum fyrir framan er fremsti stafurinn, eða fremst.
	\item vísirinn sem við hættum fyrir framan er fyrir aftan aftasta stafinn, svo síðasta táknið er lesið.
	\item skrefastærðin er sjálfgefin 1, það er að við skoðum hvert einasta tákn og hoppum ekki yfir neitt stak.
\end{enumerate}

\begin{lstlisting}[caption=Hlutstrengir, label=lst:hlutstrengir]
strengur = "kex með smjöri, osti og sultu"

# mig langar að sækja allan strenginn
sami_strengur = strengur[::] # hér nota ég þann kost í Python að setja inn fyrir mig sjálfgefin gildi

#mig langar að sækja það sem kemur fyrir aftan táknið x í kex
aftan_x = strengur[3::]

#mig langar ekki í síðasta stafinn
nema_sidasti = strengur[:-1:]

#mig langar í allan strenginn nema annan hvern staf
annar_hver = strengur[::2]

# mig langar að sækja orðið kex og mig langar einnig að sækja orðið sultu
kex = strengur[0:3]
sultu = strengur[-5:]

#einnig er hægt að lesa afturábak með því að taka neikvæða skrefastærð
ofugur = strengur[::-1]
\end{lstlisting}


\section{Aðferðir á strengi}\index{Aðferðir á strengi}
Áður en aðferðir á strengi eru kynntar þarf að útskýra stuttlega hvað aðferðir eru.
Við höfum séð print() fallið notað t.d. í kóðabút \ref{lst:notabreytu} og í kóðabút \ref{lst:stafabil}, það er innbyggt fall í Python sem prentar það sem beðið er um á staðalúttak. \todo{er ég búin að útskýra staðalúttak?}
Það fall virkar eitt og sér og þarf bara að skrifa nafnið á því, gera sviga og setja inn í svigana það sem við viljum láta fallið fá \todo{vísa í falla kaflann}.
Aðferðir eru sérhæfð föll sem virka á ákveðnar gagnatýpur.
Þannig að allar aðferðir eru föll, ekki öll föll eru aðferðir.
Á ensku eru aðferðir kallaðar \textit{methods} og föll \textit{functions}.
Aðferðir eru í raun ,,hengdar aftan á" þá týpu sem þær eiga að verka á, það er gert með því að skrifa nafnið á breytunni sem inniheldur gögnin sem við viljum framkvæma aðferðina á, gera svo punkt, skrifa nafnið á aðferðinni og setja sviga, inn í svigana fara öll þau viðföng sem aðferðin tekur við.
\todo{vísa í eitthvað sem útskýrir viðföng}

\begin{lstlisting}[caption=Aðferðir kynntar, label=lst:adferdir]
strengur = "kex með smjöri, osti og sultu"
\end{lstlisting}
\todo{fylla inn í þennan kóðabút}

Annað sem þarf að hafa í huga áður en við vinnum með aðferðir á strengi er að strengir eru óbreytanlegir (e. immutable) sem þýðir að aðferðir sem eru notaðar á þá skila öðrum strengjum í stað þess að breyta strengnum sem við keyrðum aðferðina á.
Með það í huga skulum við skoða eftirfarandi lista af aðferðum sem áhugavert er að taka fyrir.
\vspace{10px}

Hér koma fyrir nokkrar aðferðir, gerum ráð fyrir að þær séu að verka á breytuna strengur sem inniheldur táknin "valborg Sturludóttir".
\vspace{5px}
\begin{enumerate}
	\item strengur.capitalize() skilar strengnum "Valborg sturludóttir" þar sem fremsti táknið er nú hástafur.
	\item strengur.upper() skilar strengnum "VALBORG STURLUDÓTTIR" þar sem allir stafir eru nú háfstafir.
	\item strengur.lower() skilar strengnum "valborg sturludóttir" þar sem allir stafir eru nú lágstafir.
	\item strengur.switchcase() skilar strengnum "VALBORG sTURLUDÓTTIR" þar sem búið er að skipta út lágstöfum fyrir hástafi og öfugt.
	\item strengur.index('v') skilar tölunni 0 þar sem fyrsta 'v' táknið kemur fyrir í vísi 0
	\item strengur.index('x') skilar villu þar sem táknið 'x' hefur engann vísi í strengnum
	\item strengur.find('v') skilar tölunni 0 þar sem fyrsta 'v' táknið kemur fyrir í vísi 0
	\item strengur.find('x') skilar tölvunni -1 þar sem 'x' finnst ekki í stregnum. 
\end{enumerate}
\vspace{10px}

Takið eftir því að þarna er orðið lykilorðið ,,skilar" það er að við fáum í hendurnar eitthvað til að vinna með sem við getum t.d. vistað í breytu, við skoðum þetta nánar þegar við gerum okkar eigin föll í kafla \ref{k:föll}.
Það er þörf á því að vinna með aðferðir á strengi með þessum hætti því að við munum að strengir eru óbreytanlegir.
Þannig að ef við viljum vinna með einhverja útkomu byggða á streng þá þurfum við að fá útkomuna í hendurnar, því strengurinn sem aðferðinni var beitt á breytist ekki neitt við að kalla í aðferðina.
Í upptalningunni hér að ofan getum við keyrt allar þessar línur í röð eins og kóða og búist við að fá þessi svör því að breytan strengur verður aldrei fyrir neinum breytingum, hún helst sem "valborg Sturludóttir" þrátt fyrir að við köllum í alla þessa fylkingu af aðferðum.

Í þessari bók verða ekki gerð skil á öllum þeim aðferðum sem eru í boði fyrir þær týpur sem við skoðum.
Þær eru mýmargar og til ýmiss gagnlegar en það er út fyrir svið þessarar bókar að taka hverja fyrir sig fyrir og því munum við bara nefna þær gagnast okkur að skoða.
Höfundur hvetur þó til að lesandi geri ítarlegar tilraunir og prófanir.

\section{Verkefni}
\begin{exercise}\label{str1}
	Búðu til breytu sem inniheldur streng
\end{exercise}
\setboolean{firstanswerofthechapter}{true}
\begin{Answer}[ref={str1}]
	Hér þurfum við að átta okkur á því hvernig strengir eru skilgreindir, annað hvort með tvöföldum eða einföldum gæsalöppum.
	Svo og að breytur eru skilgreindar með því að setja nafnið á breytunni vinstra megin við jafnaðarmerki og gildið, í þessu tilfelli streng, hægra megin við jafnaðarmerki.
	\begin{lstlisting}
strengur = "hér er textinn sem geymist í breytunni strengur" #tvöfaldar gæsalappir báðu megin
strengur = 'hér er verið að nota einfaldar gæsalappir'
strengur = '' # þetta er tómur strengur\end{lstlisting}
\end{Answer}
\setboolean{firstanswerofthechapter}{false}

\begin{exercise}\label{str2}
	Búðu til breytu sem inniheldur streng, búðu til aðra breytu sem geymir fremsta stafinn úr þeirri breytu.
\end{exercise}
\begin{Answer}[ref={str2}]
	Fremsti stafurinn er í núllta stæði.
	\begin{lstlisting}
strengur = "texti byrjar á t"
stafur = strengur[0]\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str3}
	Notaðu innbyggt fall til þess að finna lengdina á strengnum "halló góðan daginn í dag".
\end{exercise}
\begin{Answer}[ref={str3}]
	\begin{lstlisting}
strengur = "halló góðan daginn í dag"
len(strengur)\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str4}
	Notaðu innbyggt fall til þess prenta út þann staf sem er í þriðja stæði í strengnum 'kex!'.
\end{exercise}
\begin{Answer}[ref={str4}]
\begin{lstlisting}
strengur = "kex!"
print(strengur[3])\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str4-5}
	Notaðu innbyggt fall til þess finna lengdina á strengnum 'kex!'.
\end{exercise}
\begin{Answer}[ref={str4-5}]
\begin{lstlisting}
len("kex!")
# eða
print(len("kex!"))\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str5}
	Notaðu heiltöludeilingu til að prenta út þann staf sem er í miðju strengsins "allra handa", sem er strengur af lengd 11 og því skilgreiningaratriði hvort stakið í stæði 4 eða 5 sé í miðjunni.
	Hvort kemur tómt bil eða stafurinn a?
\end{exercise}
\begin{Answer}[ref={str5}]
\begin{lstlisting}
s = "allra handa"
print(s[len(s)//2])\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str6}
	Búðu til tvær breytur sem innihalda strengi, búðu svo til þriðju breytuna sem inniheldur samskeytingu af þessum tveimur breytum.
	Lengdu þriðju breytuna, þannig að samskeytingin sé endurtekin að minnsta kosti tvisvar sinnum.
\end{exercise}
\begin{Answer}[ref={str6}]
	Athugaðu að þegar er verið að lengja breytuna þá er hún endurskilgreind.
	Þetta er gert því beðið er um að lengja þriðju breytuna og því gefið í skyn að breytan eigi að fá uppfært gidli.
	Ef þú hinsvegar lagðir annan skilning í verkefnið og bjóst til fjórðu breytu þá er það líka í lagi að svo stöddu, við erum ekki að besta fyrir minnisnotkun.
\begin{lstlisting}
s1 = "allra handa"
s2 = " bil fremst"
s3 = s1 + s2
s3 = s3*4\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str7}
Gefum okkur að til séu tveir strengir, n1 og n2, þeir innihalda fyrsta nafnið þitt og eftirnafn þitt.
Gefum okkur einnig að þeir séu ekki rétt ritaðir skv. íslenskum ritunarreglum.
Hvernig setjum við þá saman í einn streng eftir að hafa beitt á þá aðferðum til að þeir séu örugglega með fyrsta staf stóran og alla aðra litla?
\end{exercise}
\begin{Answer}[ref={str7}]
	Hér látum n1 og n2 vera á einhvern hátt stangast á við íslenskar ritunarreglur, svo skeytum við þeim saman eftir að hafa beitt á þá aðferðinni .capitalize() sem lagar þá til eins og fyrirmælin segja til um.
\begin{lstlisting}
n1 = "valBorg"
n2 = "sturluDóttir"
rett_nafn = n1.capitalize() + n2.capitalize()\end{lstlisting}
\end{Answer}

\begin{exercise}\label{str8}
Nú gerum við ráð fyrir að vera með streng í höndunum sem er geymdur í breytunni lykill.
Strengurinn á að verða sterkt lykilorð og við viljum rugla hann töluvert til þess að hann verði ekki einfalt orð sem auðvelt er að giska á.
Til þess ætlum við að gera eftirfarandi:
\begin{enumerate}
	\item Búa til annan streng sem inniheldur einhver tákn (tölur, bókstafi og önnur tákn)
	\item Búa til breytu sem inniheldur lengdina á tákna strengnum og aðra sem inniheldur lengdina á lykilstrengnum
	\item Búta upp lykil strenginn (sama sætisnúmer má nota oftar en einu sinni en öll þurfa að vera til staðar), skeyta við hvern bút einhverjum bút úr táknastrengnum.
		Í þessu skrefi má lengja bútana og/eða beyta strengjaaðferðum á þá og endurskilgreina lykil strenginn sem þessa breytingu.
	\item Að lokum á að snúa strengnum við, þannig að hann sé afturábak.
\end{enumerate}
\end{exercise}
\begin{Answer}[ref={str8}]
Við höfum ansi frjálsar hendur í þessu verkefni, en athugið að við höfum enn ekki kynnst því hvernig á að gera eitthvað með skilyrðum, lykkjum eða handahófskennt.
Svo við verðum að beita einungis þeim aðferðum sem við höfum séð hingað til.
Einnig verðum við að passa að ekki sé verið að vísa í sætisnúmer sem eru ekki til staðar í strengjunum.
Takið eftir að þessi lausn er einungis hugmynd, í skrefi 1 má skipta um strengi, í skrefi 3 má klippa í sundur á mismunandi hátt, beita fleiri aðferðum og lengja sjaldnar eða oftar eða með öðrum tölum.
Aðalatriðið í skrefi þrjú er að sama hvaða strengir eru settir inn í skrefi 1 þá er aldrei vísað út fyrir strenginn og allur lykilstrengurinn er notaður, hvert einasta stæði.

Prófaðu að setja inn mismunandi strengi og prenta út lykilinn í lokin.

Ef þú leystir verkefnið með ákveðnum sætisvísum þar sem þú vissir hversu mörg stafabil voru í strengnum þínum er kóðinn einungis nothæfur á strengi af nákvæmlega sömu lengd.
Gott er að skrifa kóða sem leysir verkefni almennt en ekki bara það tiltekna verkefni sem er fyrir framan þig.
\begin{lstlisting}
#skref 1
lykill = "þetta á að verða gott lykilorð"
takn = "0123456789!$%&()acptrewq" 

#skref 2 
lengd_l = len(lykill)
lengd_t = len(takn)

#skref 3
lykill = lykill[0:lengd_l//4].upper()+takn[0:lengd_t//8]*2 + lykill[lengd_l//4:lengd_l//2] + takn[lengd_t//7:lengd_t//4] + lykill[lengd_l//2:-1] + takn[0:lengd_t//3] + lykill[-1]*2+takn[-1]*3 

#skref 4
lykill = lykill[::-1]\end{lstlisting}
\end{Answer}