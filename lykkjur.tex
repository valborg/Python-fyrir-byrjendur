\chapterimage{chapters5.png} % Chapter heading image

\chapter{Lykkjur}\index{Lykkjur}\label{k:lykkjur}
Til þess að keyra kóða endurtekið án þess að afrita og líma eða handvirkt keyra hann oft, þá notum við lykkjur.
Lykkjur eru kóðabútar sem keyrist endurtekið, eða ítrar, eftir ákveðnum reglum.
Þær lykkjur sem eru til í Python eru \textbf{for} lykkjur og \textbf{while} lykkjur.
For lykkjur keyra fyrir hvert stak í ítranlegum hlut eða hverja tölu á bili (keyra ákveðið oft, í mesta lagi).
While lykkjur keyra á meðan skilyrðið fyrir keyrslu þeirra er satt (geta keyrt að ,,eilífu'').
Nöfnin á for og while verða ekki þýdd sérstaklega í þessari bók, en við segjum t.a.m. ,,að gera eitthvað á meðan'' eða ,,gera eitthvað fyrir hvert stak''.
\begin{wrapfigure}{I}{0.15\textwidth} %i o r l 
	\begin{center}
		\includegraphics[scale=0.5]{doooodles_valborg-10.png}
	\end{center}
\end{wrapfigure}
Við ætlum að kynnast því til hvers þær eru ætlaðar og hvers þær eru megnugar, í hvaða tilfellum á að nota hvora fyrir sig og lykilorð sem gera notkun þeirra öflugri.
Byrjum á því að skoða til hvers ,,að lykkja'' og hvað það eiginlega þýðir.
Það að nota lykkju þýðir að skrifa forritsbút sem keyrir endurtekið.

Tökum dæmi úr daglegu lífi; ef við viljum framkvæma einhverja aðgerð eins og að vaska upp búum við til reglu eins og að setja fyrst upp uppþvottahanska, láta vatnið renna og stafla öllu sem er óhreint við hliðina á vaskinum. 
Svo viljum við endurtaka aðgerðina að þrífa hvern hlut sem er öðru megin við vaskinn, þar til þeir eru allir komnir hreinir hinu megin.
Endurtekningin þarna er að taka upp hvern óhreinan hlut og þrífa hann.
Þá gætum við sagt að fyrir hvern hlut sem er hægra megin, viljum við þrífa hann og setja svo vinstra megin (fer eftir því hvernig vaskurinn snýr) og hætta þegar engir hlutir eru eftir hægra megin.
Þetta ferli að framkvæma sömu aðgerð á stök í mengi er einmitt það sem for lykkja getur gert.

Tökum annað dæmi úr daglegu lífi; ef við ætlum að bíða eftir einhverjum og framkvæma svo einhverja aðgerð þegar viðkomandi kemur þá myndum við væntanlega bíða þangað til að viðkomandi kemur.
Svo á meðan viðkomandi er ekki enn kominn þá höldum við áfram að bíða.
En þar sem við erum ekki tölvur þá myndum við ekki bíða endalaust, við myndum gefast upp.
Þetta ferli að halda áfram að framkvæma einhverja aðgerð þangað til að eitthvað skilyrði á ekki við er það sem while lykkja getur gert.

\section{For}\index{For lykkjur}
For lykkkjur nota lykilorðið \textbf{for} ásamt lykilorðinu \textbf{in}.
Það sem in gerir þegar það er notað eitt og sér er að spyrja hvort að \textit{eitthvað} sé ,,í'' \textit{einhverju öðru} (sjá kóðabút \ref{lst:lykkjur-in}) en sem hluti af for lykkju þá er það in sem úthlutar lykkjunni næsta staki úr menginu til að skoða.
Þannig að þetta býr til segð sem skilar sanngildi eða einu tilteknu tákni eða staki úr hlut.
Nú skulum við líta á kóðabút \ref{lst:lykkjur-for} til að átta okkur á því hvernig lykkjan er notuð, hvernig við beitum inndrætti til að skilgreina stef lykkjunnar (það sem tilheyrir henni) og hvernig skilyrðissetningar bætast við þetta.

\begin{lstlisting}[caption=Lykilorðið in, label=lst:lykkjur-in]
print('er táknið a í strengum Valborg?')
print("a" in "Valborg")

print('er táknið x í Valborg?')
print("x" in "Valborg")
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
er táknið a í strengum Valborg?
True
er táknið x í Valborg?
False
\end{lstlisting}
\lstset{style=venjulegt}

Eins og sést í kóðabút \ref{lst:lykkjur-in} þá virkar in nokkuð svipað því sem orðið í gerir í setningu.
Ekki gleyma þessu lykilorði við lykkjugerðina.
Sjá ítarefni í lok kaflans um önnur lykilorð sem gagnast við forritun á lykkjum.
Í næstu kóðabútum verður sýnd grunnvirkni for-lykkjunnar.
\vspace{1cm}
\begin{itarefni}
	\textbf{Nánar um \texttt{in} og vísa}\\
	Þegar þetta orð er notað í for lykkjum er þó ekki verið að setja fram segð heldur er verið að úthluta einhverri hlaupandi breytu tilteknu gildi úr ítranlegum hlut.
	Það að hlutur sé ítranlegur þýðir að við getum horft á hann stak fyrir stak, skoðað eitt gildi úr honum í einu.
	Eins og strengur hefur vísa þá getum við horft á hvert tákn fyrir sig með því að rúlla í gegnum vísana frá 0 og út í enda (eða einhverri annarri röð).
	Listar eru einnig ítranlegir þar sem stökin í listum hafa vísa og því má horfa á hvert stak fyrir sig í heild sinni, hvort sem það er annar listi eða ein stök tala.
	Heiltölur, fleytitölur og sanngildi eru ekki ítranleg.
\end{itarefni}
\todo{formatting}
\vspace{2cm}
%\begin{wrapfigure}{}{0.4\textwidth} %i o r l 
	\begin{center}
		\includegraphics[scale=1.3]{doooodles_valborg-07.png}
	\end{center}
%\end{wrapfigure}

\newpage \todo{formatting}

\begin{lstlisting}[caption=For lykkjur kynntar, label=lst:lykkjur-for-kynning]
# við byrjum á að skilgreina streng
strengur = "Valborg"
print(strengur, "til viðmiðunar")

for stafur in strengur:
	print(stafur)
	
print()
print('lykkjan er búin')
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
Valborg til viðmiðunar
V
a
l
b
o
r
g

lykkjan er búin
\end{lstlisting}

Í kóðabút \ref{lst:lykkjur-for-kynning} hvernig rúllað er í gegnum strenginn \texttt{Valborg} með breytunni \texttt{stafur}.
Sú breyta er búin til í línu 5 þegar lykkjan er búin til, það þurfti ekki að skilgreina hana áður.
Það er vegna þess að breytan er skilgreind inni í lykkjunni fyrir okkur, hún er áfram aðgengileg en er ósköp gagnslaus eftir keyrsluna svo okkur er alveg sama um hana, hún er svokölluð \emph{tímabundin} (e. temporary) breyta sem hættir að skipta máli eftir notkun innan lykkjunnar.

Allt það sem tilheyrir svo lykkjunni eða á að gerast í hverri keyrslu hennar er inndregið undir henni.
Línur 9 og 10 eru ekki hluti af stefi lykkjunnar og keyrast því ekki nema einu sinni, eins og lína 3 prentast bara einu sinni.

Það sem prentast á úttakið úr línu 6, breytan \texttt{stafur}, er hvert tákn fyrir sig í þeirri röð sem það kemur fyrir í strengnum sem verið er að ítra í gegnum.
Lesið yfir þennan kóðabút og gerið tilraunir á eigin spýtur til að átta ykkur á því hvað það er sem er að gerast.

Hvað gerist ef inndrátturinn breytist?
Hvað prentast þá út?
Hvað gerist ef eitthvað annað orð er sett í staðinn fyrir \texttt{stafur}?
En \texttt{strengur}?
Haldið áfram að gera tilraunir með þetta þangað til að þið áttið ykkur betur á því hvernig þetta hangir saman.

Sjáum nú hvernig megi flétta skilyrðissetningar inn í þetta.

\lstset{style=venjulegt}
\begin{lstlisting}[caption=For lykkja og skilyrðissetningar, label=lst:lykkjur-for-skil]
for stafur in strengur:
	# við vitum að það er a í Valborg svo þetta mun einhvern tímann gerast
	if(stafur == 'a'):
		print(stafur)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
a
\end{lstlisting}

Í kóðabútum \ref{lst:lykkjur-for-kynning} og \ref{lst:lykkjur-for-skil} vorum við að vinna með sama strenginn, en í fyrra skiptið prentaðist hann allur út en í seinna skiptið fengum við bara eitt stakt tákn út.
Munurinn er sá að í kóðabút \ref{lst:lykkjur-for-skil} þá þegar við vorum komin með táknið í hendurnar vildum við gera eitthvað við það svo við spurðum er þetta tákn jafngilt \texttt{a}, einungis í því tilfelli vildum við prenta eitthvað út.
Við ákváðum að prenta út táknið sem við vorum að skoða sem er geymt í breytunni \texttt{stafur} en hefðu hæglega getað gert eitthvað annað.

Við sjáum einnig að þegar við settum inn skilyrðissetningu þá bættist við annar inndráttur, það er vegna þess að inndráttarnotkunin breytist ekki sama hvar við erum að nota kóða sem krefst inndráttar heldur dregst kóðinn bara lengst til hægri eftir því sem við förum innar. 
Því getur verið ágætt að takmarka hreiðrun til þess að kóðinn sé sem læsilegastur.

Gerið nú tilraunir til að átta ykkur betur á því hvernig megi skoða ítranlegan hlut en framkvæma einungis aðgerð ef eitthvað skilyrði á við.
Hvað gerist ef við breytum skilyrðissetningunni?
En ef við breytum því sem er undir henni?
Hvað gerist ef við bætum við \textit{annars} klausu?
Má setja eitthvað inn í stef lykkjunnar á eftir skilyrðissetningunni?

Næst skoðum við annan ítranlegan hlut með for lykkju, það er listi.

\lstset{style=venjulegt}	
	
\begin{lstlisting}[caption=For lykkja með lista, label=lst:lykkjur-for-listi]
listinn_minn = [0, "strengur", [0, 1, 2]]

for x in listinn_minn:
	# nú hleypur x í gegnum stökin í breytunni listinn_minn
	print(x)

\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}	
0
strengur
[0, 1, 2]
\end{lstlisting}



\lstset{style=venjulegt}

Tökum eftir í kóðabút \ref{lst:lykkjur-for-listi} þá fær \texttt{x} það gildi sem er næst í röðinni í listanum, og það skiptir ekki máli af hvaða týpu gögnin eru.
Nafnið á breytunni er ekki lýsandi, ekki eins og \texttt{stafur} eða \texttt{strengur} í kóðabút \ref{lst:lykkjur-for-skil}, ástæðan fyrir því að nafnið x varð fyrir valinu er til að sýna lesendum að þetta er breytuheiti eins og hvert annað og lútir sömu venjum og við sáum í kafla \ref{k:tolur}.
Listinn í línu 1 inniheldur gögn af þremur týpum, breytan \texttt{x} kippir sér ekkert upp við það og birtir gögnin í þeirri röð sem þau bárust.

Prófið ykkur nú aðeins áfram og reynið í staðinn fyrir \texttt{listinn\_minn} að setja einhvern annan lista, sem er ekki geymdur í breytu.
Prófið nú að setja inn skilyrðissetningu þarna og nota \texttt{type()} með skilyrðissetningu til að prenta einungis þau x sem eru strengir.

For lykkjur eru því helst gagnlegar þegar við vitum hversu mörg stök lykkjan á mörgulega að skoða, því til stuðnings ætlum við að skoða innbyggða fallið \textbf{\texttt{range()}} sem gefur okkur hlut af tölum á ákveðnu bili.
Fallið \texttt{range()} tekur við sömu viðföngum eins og hornklofarnir\footnote{það eru í raun ekki viðföng, í "strengur"[1:5:2] eru 1, 5, og 2 ekki viðvöng beinlínis heldur vísar.} þegar við sóttum nokkur tákn upp úr streng eða lista, þau eru þó aðgreind með kommum\footnote{Við höfum áður séð viðföng notuð í falli eins og print() fallið, þar sem við getum prentað margt út svo lengi sem við setjum kommur á milli.}.

Viðföngin í \texttt{range(a,b,c)} fallið eru heilartölur og þeim er raðað svona:

\begin{enumerate}
	\item \textbf{a}: talan sem á að byrja að nota (hér má sleppa því að setja þetta inn því að sjálfgefið gildi er 0)
	\item \textbf{b}: talan sem á að hætta fyrir framan (þetta verður að setja inn, því að þetta er aðalatriðið)
	\item \textbf{c}: tala sem segir til um skrefastærðina (sjálfgefið gildi er 1 og þessu má sleppa), ef skrefastærð er tekin með þarf að velja upphafsstað (annars myndast tvíræðni)
\end{enumerate}

Ef við viljum leysa verkefni sem felst í því að finna odda tölur frá 0 og upp að 1000 hvernig myndum við fara að því?
En ef við viljum vera viss um að eitthvað gerist ákveðið oft?
Skoðum kóðabút \ref{lst:lykkjur-range-kynnt} þar sem fyrra verkefnið er leyst á tvo mismunandi vegu.

%\begin{wrapfigure}{}{0.4\textwidth} %i o r l 
\begin{center}
	\includegraphics[scale=0.4]{doooodles_valborg-02.png}
\end{center}
%\end{wrapfigure}

\begin{lstlisting}[caption=range() fallið kynnt með for lykkju, label=lst:lykkjur-range-kynnt]
for tala in range(6):
	if(tala%2 != 0):
		print(tala)		

print()

for tala in range(0,5,2):
	print(tala)

print()

for x in range(3):
	print('bílalúgudýraspítali', x)
\end{lstlisting}		
		
\lstset{style=uttak}
\begin{lstlisting}
1
3
5

0
2
4

bílalúgudýraspítali 0
bílalúgudýraspítali 1
bílalúgudýraspítali 2
\end{lstlisting}

Aðalatriðið sem þarf að hafa í huga þarna í kóðabút \ref{lst:lykkjur-range-kynnt} er að for lykkjan hleypur í gegnum lista af tölum svo að við vitum alltaf hvar við erum stödd og við vitum hvað við keyrum lykkjuna oft.
Sjáum í línu 13 þá er \texttt{x} prentað og á úttakinu (línur 9-11) sést að það er hlaupandi númer sem byrjar í 0 og hættir í 2 sem er talan fyrir framan 3 og þar vildum við hætta.
Nú getið þið breytt þessum lykkjum til að skoða til dæmis sléttar tölur undir 1000 eða tölur deilanlegar með 17 undir 100.

En við þurfum ekki endilega að byrja í núll, sjáum í kóðabút \ref{lst:lykkjur-range-meira} hvernig hægt er að velja afmarkaðra talnabil og svo sjáum við í kóðabút \ref{lst:lykkjur-range-mest} að hægt er að telja afturábak.

Allt er þetta þó spurning um að finna það sem hentar því verkefni sem við erum að reyna að leysa.
Næstu sýnidæmi eru meira til þess fallin að sýna virkni \texttt{range()} fallsins og for lykkja yfirhöfuð án þess þó að vera að leysa einhver flókin vandamál.
Eftir að hafa séð þetta, gætuð þið prófað ykkur áfram og náð þannig tökum á þessu.

Það sem skiptir mestu máli til að ná ákveðinni leikni er að prófa sig áfram, gera tilraunir og þora að mistakast.

\lstset{style=venjulegt}
\begin{lstlisting}[caption=for lykkja og range() fallið með skilyrðissetningu, label=lst:lykkjur-range-meira]
for tala in range(10, 20):
	if(tala%3 == 0):
		print(tala)
\end{lstlisting}

\lstset{style=uttak}
\begin{lstlisting}
12
15
18
\end{lstlisting}

Eins og áður kom fram þá þarf að taka fram upphafspunkt ef nota á skrefastærð svo að í línu 1 í kóðabút \ref{lst:lykkjur-range-mest} fer ekki milli mála að byrja á fyrir framan töluna 10 og enda fyrir aftan töluna 20.
Svo það sem gerist í skilyrðissetningunni er að tölunni er kastað í streng og spurt er hvort að síðasta táknið í strengnum sé talan 9.
Ef svo er þá prentum við út töluna ásamt textanum \texttt{endar á 9}, svo þegar keyrslu lykkjunnar lýkur fáum við að sjá hvað breytan \texttt{tala} inniheldur.


\lstset{style=venjulegt}
\begin{lstlisting}[caption=for lykkja range() fallið notað til að telja aftur á bak, label=lst:lykkjur-range-mest]
for tala in range(100, 70, -1):
	if(str(tala)[-1] == '9'):
		print(tala, 'endar á 9')
print('lykkjan er búin, hvað er tala?', tala)
\end{lstlisting}

\lstset{style=uttak}
\begin{lstlisting}
99 endar á 9
89 endar á 9
79 endar á 9
lykkjan er búin, hvað er tala? 71
\end{lstlisting}
\lstset{style=venjulegt}

\subsection{Gagnleg lykilorð}\index{lykilord}\label{uk:lykkjulykilorð}
	Áður en lengra er haldið í hvernig á að beita lykkjum er ágætt að nefna nokkur grunn lykilorð sem hjálpa okkur gríðarlega.
	Þau eru \textbf{pass}, \textbf{continue} og, \textbf{break}.

\lstset{style=venjulegt}
\begin{lstlisting}[caption=Lykilorðið pass notað með for lykkju, label=lst:lykkjur-for-pass]
for x in range(15):
	if(x % 3 != 0):
		pass
	else:
		print('þetta gerðist fyrir töluna', x)
		
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
þetta gerðist fyrir töluna 0
þetta gerðist fyrir töluna 3
þetta gerðist fyrir töluna 6
þetta gerðist fyrir töluna 9
þetta gerðist fyrir töluna 12
\end{lstlisting}

\lstset{style=venjulegt}
\begin{lstlisting}[caption=Lykilorðið continue notað með for lykkju, label=lst:lykkjur-for-cont]
for x in [1, 2, 59, 9, 53, 2]:
	if (x < 50):
		continue
	print(x)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
59
53
\end{lstlisting}
\lstset{style=venjulegt}
\begin{lstlisting}[caption=Lykilorðið continue notað með for lykkju, label=lst:lykkjur-for-break]
listi_af_tolum = [1,5,7,9,13,15,17,18]
for tala in listi_af_tolum:
	if(tala == 13):
		print("það er þrettán í listanum")
		break
	elif(tala != 13):
		continue
	else:
		print("þetta prentast aldrei")
		
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
"það er þrettán í listanum"
\end{lstlisting}
\lstset{style=venjulegt}
Í kóðabútum \ref{lst:lykkjur-for-pass}, \ref{lst:lykkjur-for-cont} og, \ref{lst:lykkjur-for-break} sjáum við að lykilorðin geta gefið okkur möguleika á að hætta keyrslu, nota bara hluta úr kóða eða gefa okkur kost á að nýta staðhaldara þegar við vitum ekki hvaða kóði á að koma þangað.
Án þess að fara meira út í hvernig kóðinn fyrir þessi lykilorð virka þá er þess virði að nefna að þau eru ekki nauðsynleg í hverri lykkju sem við forritum hér eftir, þau eru gagnleg þegar þau eiga við og við þurfum að átta okkur á hvernær svo er.


\begin{itarefni}
\textbf{Nánar um lykkju lykilorðin}\\	
\begin{itemize}[leftmargin=*]
\item \textbf{pass} er lykilorð sem gerir ekkert, tölvan heldur áfram keyrslu sinni eins og ekkert hafi verið gert, nema að þarna er kóði sem er rétt inndreginn og gerir það að verkum að tölvan kvartar ekki yfir því að hafa búist við einhverju inndregnu en fengið ekkert.
Þetta notum við þegar við erum ekki viss hvað á að vera í lykkjunni og við setjum þetta orð inn svo að við getum haldið áfram með annað sem átti að forrita.
pass er gagnlegt sem staðhaldari (e. placeholder) þegar við erum ekki viss hvernig á að halda áfram en verðum að setja eitthvað því að annars fengjum við málskipanar villu (e. syntax error).
Þetta lykilorð má nota annarsstaðar en í lykkjum og er einnig gagnlegt sem staðhaldari í föllum.
\item \textbf{continue} er lykilorð sem lætur vélina stoppa þar sem hún er í lykkjunni, hunsa allt sem kemur á eftir því og fara efst í lykkjuna.
Continue er gagnlegt þegar kemur að því að það er bara ákveðin virkni sem á að framkvæma undir vissum aðstæðum og við viljum ekki að vélin geri allar aðgerðir sem koma fram í lykkjunni okkar.
Þetta lykilorð má einungis nota inni í lykkjum.
\item \textbf{break} hættir keyrslu lykkjunnar, ólíkt continue þá förum við alfarið út úr lykkjunni þegar kallað er í þetta lykilorð og keyrir vélin næst kóða sem er ekki inndreginn undir lykkjunni.
Þetta lykilorð má einungis nota inni í lykkjum.		
Þetta lykilorð getur reynst ómetanlegt þegar við skoðum while lykkjur.
\end{itemize}

\end{itarefni}
\comment{
	
	%%%%%%%%%%%%%%%% comment byrjar
	

	
	Skoðum nú lykilorðið in áður en lengra er haldið til þess að öðlast dýpri skilning á því hvernig for lykkjan virkar.
	
	
	

	
	
	
	%% búið að nota þetta !
	
	\section{Lykkjur}\index{Lykkjur}
	Til þess að keyra kóða endurtekið án þess að afrita og líma eða handvirkt keyra hann oft, þá notum við lykkjur.
	Lykkjur eru kóðabútar sem keyrist endurtekið eftir ákveðnum reglum, þær lykkjur sem eru til í Python eru for lykkjur og while lykkur.
	For lykkjur keyra fyrir hvert stak í ítranlegum hlut eða hverja tölu á bili (keyra ákveðið oft, í mesta lagi).
	While lykkjur keyra á meðan skilyrðið fyrir keyrslu þeirra er satt (geta keyrt að ,,eilífu'').
	
	%%%%%% comment endar
}


\section{While}\index{While lykkjur}
While lykkjur nota lykilorðið \textbf{while} og keyra ,,á meðan'' eitthvað skilyrði er satt.
Þær eru helst ganglegar þegar við vitum ekki hvað við viljum að lykkjan keyri lengi eða þegar við viljum að hún keyri endalaust nema annað sé tekið fram (t.d. með break).

\begin{wrapfigure}{i}{0.2\textwidth} %i o r l 
	\begin{center}
		\includegraphics{doooodles_valborg-11.png}
	\end{center}
\end{wrapfigure}
Skilyrðið fyrir keyrslunni er metið sem sanngildi, annað hvort með sanngildinu sjálfu eða segð sem skilar sanngildi.
Þá gefst okkur tækifæri á að forrita lausn á vanda eins og ,,ef það er enginn eftir í stofunni á að slökkva ljósið'' og forritið keyrir á meðan ,,einhver er eftir í stofunni''.
Þarna þurfum við ekki að gera annað en að fylgjast með aðstæðum.
While lykkjur eru vandmeðfarnar og harla líklegt að lenda í því að skrifa lykkju sem keyrir endalaust við fyrstu notkun.
Þær eru jafnframt öflugar til að leysa ýmsan vanda sem krefst þess að aðstæður hverju sinni séu skoðaðar.

Skoðum kóðabút \ref{lst:lykkjur-while-endalaust} til þess að sjá hvernig má auðveldlega lenda í vandræðum við gerð slíkra lykkja og hvernig uppsetning þeirra lítur út.


\begin{lstlisting}[caption=while lykkja sem keyrir að eilífu, label=lst:lykkjur-while-endalaust]
while(True):
	# inndreginn kóði sem tilheyrir lykkjunni - stef lykkjunnar
	pass
print('kemst ekki hingað því lykkjan er enn að keyra')
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
# ef lykkjan okkar gerði eitthvað væri þessi bútur troðfullur
\end{lstlisting}
\lstset{style=venjulegt}
Lykkjan í kóðabút \ref{lst:lykkjur-while-endalaust} keyrir að eilífu vegna þess að skilyrðið fyrir henni er \texttt{True} og ekkert breytir því í stefi hennar.
Hægt er að stöðva vélina handvirkt í þessum aðstæðum\footnote{Í Jupyter Notebooks er það gert með Kernel -> Restart Kernel}.
En nú viljum við að þetta gerist ekki aftur svo við notum break lykilorðið.


\begin{lstlisting}[caption=while lykkja sem keyrir ekki að eilífu en hún gerir ekkert, label=lst:lykkjur-while-break]
while(True):
	# nú ætlum við að reyna að komast út
	break
print('vei við komumst út, en hvað kostaði það?')
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
vei við komumst út, en hvað kostaði það?
\end{lstlisting}
\lstset{style=venjulegt}

Við komumst út úr lykkjunni, hún keyrði einu sinni og hætti strax keyrslu, ekki mjög gagnleg lykkja en hún keyrði allavega ekki að eilífu.
Annað sem við þurfum líka að hugsa um er að skilyrðið okkar sé alveg örugglega rétt skilgreint, að við séum að ná að fanga þær aðstæður sem við vildum halda í.
Skoðum næsta kóðabút þar sem skilyrðið mun aldrei verða satt og því mun stef lykkjunnar aldrei keyrast og breytan sem er þar skilgreind aldrei fá stað í minni, sem veldur villu þegar á að nota breytuna á eftir lykkjunni. 

\begin{lstlisting}[caption=while lykkja sem keyrir aldrei, label=lst:lykkjur-while-false]
while(3 < 2):
	print('þetta mun aldrei prentast því að stef lykkjunnar mun aldrei keyrast')
	x = 5
print(x)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
NameError                                 Traceback (most recent call last)
<ipython-input-21-8ba2a8c60ab2> in <module>
2         print('þetta mun aldrei prentast því að stef lykkjunnar mun aldrei keyrast')
3         x = 5
----> 4 print(x)

NameError: name 'x' is not defined
\end{lstlisting}
\lstset{style=venjulegt}

Takið sérstaklega eftir því hvað villuskilaboðin eru skýr í úttakinu á kóðabút \ref{lst:lykkjur-while-false}, að villan er nafnavilla, hún á sér stað í línu fjögur í kóðanum og að það er vegna þess að 'x' er ekki skilgreint þegar það er notað í línu 4.

Skoðum nú einhverja gagnlega lykkju.
Segjum að við skuldum 8.000 krónur og við ætlum að borga inn á skuldina okkar 1.000 krónur í einu.
Við viljum að sjálfsögðu hætta að borga þegar við skuldum ekkert lengur og auðvitað viljum við að skuldin okkar lækki.

\begin{lstlisting}[caption=while lykkja sem eitthvað vit er í, label=lst:lykkjur-while-skuld]
skuld = 8000
innborgun = 1000
while(skuld > 0):
	skuld = skuld - innborgun
	print('nú er skuldin', skuld)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
nú er skuldin 7000
nú er skuldin 6000
nú er skuldin 5000
nú er skuldin 4000
nú er skuldin 3000
nú er skuldin 2000
nú er skuldin 1000
nú er skuldin 0
\end{lstlisting}
\lstset{style=venjulegt}

Nú þegar við höfum skoðað haldbært dæmi um eitthvað sem vit er í skulum við skoða óhlutbundið dæmi þar sem við erum að vinna með hugmyndina um að slökkva ljósin í stofunni ef allir eru farnir.

\begin{lstlisting}
while(True):
	if(fjöldi nemenda er 0):
		slökkva ljós
		break
		
	fjöldi nemenda talinn aftur
\end{lstlisting}
\lstset{style=venjulegt}

Þetta er ekki alvöru Python kóði, heldur \emph{sauðakóði} (e. psudocode) sem kemur þó merkingunni til skila, að aðalatriðið er að vera í sífellu að skoða það hvort að engir nemendur séu eftir og telja þá aftur.
Þar kemur while lykkjan sterk inn, að við viljum gera eitthvað á meðan eitthvað ástand varir.
Takið eftir að talning nemenda fer fram inni í lykkjunni, ef sá hluti yrði færður einum inndrætti innar væri það ekki lengur hluti af stefi lykkjunnar og keyrðist þegar henni væri lokið (en henni myndi aldrei ljúka því að aldrei yrði komist inn í skilyrðissetninguna því að ekkert breytir fjölda nemenda innan lykkjunnar).

Hugsum okkur nú að nota segð fyrir eitthvað flóknara skilyrði en við sáum í kóðabút \ref{lst:lykkjur-while-false}.
Eins og við sáum á myndum \ref{fig:flæðirit} og \ref{fig:flæðirit-neitun} þá skiptir máli hvernig við orðum skilyrðin okkar, eins og setningin ,,á meðan það er óuppvaskaður diskur við hliðina á vaskinum eða við eldhúsborðið þá ætla ég að vaska upp'' hvernig yrði hún forrituð sem skilyrði inn í while lykkju?
Athugum að þarna erum við með rökvirkjann \emph{eða} og því þarf annað hvort að vera skítugur diskur við vaskinn eða á borðinu.
\begin{lstlisting}[caption=while lykkja óhlutbundin til að sýna rökvirkja, label=lst:lykkjur-while-or]
while(það er skítugur diskur við vaskinn eða það er skítugur diskur við borðið):
	vaska upp disk
print(allir diskar eru hreinir)
\end{lstlisting}
\lstset{style=venjulegt}

Hér sjáum við eitt sem vefst fyrir mörgum, það er að skilyrðið í línu 1 virðist vera óþarflega nákvæmt, til hvers að taka fram skítugur diskur tvisvar?
Það er vegna þess að segðinni ,,það er skítugur diskur við vaskinn'' er hægt að svara með já eða nei og sömuleiðis ,,það er skítugur diskur við borðið''.
En ef skilyrðið okkar hefði einungis verið ,,það er skítugur diskur við vaskinn eða borðið'' þá lendir vélin í því að fá í hendurnar segð sem hægt er að svara hægra megin við eða og svo ,,borðið'' hinu megin.
Hvernig á að svara ,,eða borðið''?
Það er ekki hægt, því að það er ekki skiljanleg spurning.
Því þarf að muna að hafa alltaf heila skýra segð sem hægt er að meta sem sanna eða ósanna.

Tökum dæmi um rökvirkjanotkun í skilyrði í lykkju í kóðabút.
Þar sem við viljum vita hvort að við séum með líkamshita á eðlilegu bili, eftir að hafa mælt það einu sinni í upphafi og svo mælum við reglulega eftir það.

\begin{lstlisting}[caption=while lykkja með og rökvirkjanum, label=lst:lykkjur-while-and]
hiti = 37.0
while(hiti < 37.6 and hiti > 36.0):
	# mælum hitann með þessari óvísindalegu aðferð
	hiti = hiti + 0.5
	print(hiti)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
37.5
38.0
\end{lstlisting}
\lstset{style=venjulegt}

Við sjáum að skilyrðið í kóðabút \ref{lst:lykkjur-while-and} er ekki með \emph{eða} heldur \emph{og}, það sem er verið að spyrja er ,,er hitinn á milli talnanna 36.0 og 37.6?''.
Þannig að fyrst er spurt er hitinn lægri en 37.6, svo er spurt hvort hann sé hærri en 36.0 og ef svarið við báðum spurningum er já þá hlýtur hitinn að vera á milli þessara talna. 

Annað sem má gera við while lykkjur er að koma fram við þær sem skilyrðissetningu sem má fá else klausu aftan við sig sem keyrist þegar skilyrði lykkjunnar verður ósatt.

\begin{lstlisting}[caption=Að nota else með while, label=lst:lykkjur-while-else]
x = 5
while(x > 1):
	print("talan er", x, "sem er stærra en 1")
	x -= 1 
else:
	print("nú er talan orðin 1 því 1 er ekki stærri en 1 -->", x)
	
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
talan er 5 sem er stærra en 1
talan er 4 sem er stærra en 1
talan er 3 sem er stærra en 1
talan er 2 sem er stærra en 1
nú er talan orðin 1 því 1 er ekki stærri en 1 --> 1
\end{lstlisting}
\lstset{style=venjulegt}



%-------------------------------
\newpage
\section{Æfingar}
\begin{exercise}\label{lyk1}
	Búið til lykkju sem keyrir 100 sinnum og prentar út númer keyrslunnar.
\end{exercise}
\setboolean{firstanswerofthechapter}{true}
\begin{Answer}[ref={lyk1}]
Þetta er mjög svipað kóðabút \ref{lst:lykkjur-range-kynnt}, síðustu lykkjunni.
\begin{lstlisting}
for x in range(100)
	print(x)\end{lstlisting}
\end{Answer}
\setboolean{firstanswerofthechapter}{false}

\begin{exercise}\label{lyk2}
Búið til lista sem inniheldur einungis tölur, lykkjið í gegnum allan listann og leggið saman tölurnar.
Prentið út summu listans að keyrslu lokinni.
\end{exercise}
\begin{Answer}[ref={lyk2}]
Athugum hér að til þess að geta haldið utan um summu þurfum við að skilgreina breytu áður en við gerum lykkjuna, sömuleiðis listann af tölunum.
Talnalistinn getur verið með hvaða tölum sem er, heiltölum eða fleytitölum.
Summuna verðum við að skilgreina og þar sem við höfum ekki séð neina tölu þá skilgreinum við hana sem núll í upphafi.
Svo lykkjum við í gegnum listann okkar og notum breytuna sem hleypur í gegnum listann til að bæta við summuna.
Þegar lykkjan er búin þá erum við ekki lengur í sama inndrætti og þá ætlum við að prenta út summuna okkar, þá prentast hún bara einu sinni.
 
\begin{lstlisting}
listi = [1,2,3,4,5,6,7,8,9,10]
summa = 0
for tala in listi:
	summa = summa + tala
print(summa)\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk3}
Þetta er sama æfing og \ref{lyk2} nema í stað þess að búa til ykkar eigin talnalista eigið þið að finna summu talna frá 0 upp að 1000.
Prentið svo út summuna þegar keyrslu lykkjunnar lýkur.
\end{exercise}
\begin{Answer}[ref={lyk3}]
Svo við gerum það sama og áður, við þurfum summu breytu áður en við förum inn í lykkjuna en við notum \texttt{range()} fallið.
	
\begin{lstlisting}
summa = 0
for tala in range(1000):
	summa = summa + tala
print(summa)\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk4}
Síðasta talnaæfingin með for-lykkjur.
Nú ætlið þið að prenta allar þær tölur sem eru á bilinu 0-100 sem eru með þversummu\footnote{https://is.wikipedia.org/wiki/\%C3\%9Eversumma} (e. transverse sum) hærri en sex.
Þar sem þessi æfing er töluvert flóknari en aðrar verður hún leyst í skrefum og hægt er að kíkja á svörin til að fá fyrst vísbendingu.
\end{exercise}
\begin{Answer}[ref={lyk4}]
Til þess að geta skoðað þversummu þurfum við að skoða hvern tölustaf fyrir sig og þá þurfum við að kasta í streng og skoða hvert stak í honum.
Þetta veldur því að við þurfum lykkju innan í lykkju.
Einnig þurfum við að kasta á milli taga og nota samanburð.
Hér er vísbending.
\begin{lstlisting}
for tala in range(100):
	talna_strengur = ?
	?
	for stak in talna_strengur:
		? += ?
	if(? > 6):
		?
\end{lstlisting}

Áður en þið skoðið lausnina skulið þið gera heiðarlega tilraun til að fylla inn fyrir spurningarmerkin.
Hér kemur langur texti um hvað þarf að gerast svo að þið sjáið ekki lausnina alveg strax.

Það sem þarf að setja inn er að gera \texttt{tala} að streng svo hægt sé að rúlla í gegnum hana í innri lykkjunni.

Áður en innri lykkjan er keyrð þarf að skilgreina breytu sem á að halda utan um summuna, ástæðan fyrir því að það gerist í ytri lykkjunni en ekki utan hennar eins og áður er vegna þess að við viljum fá nýja summu sem er skilgreind sem 0 fyrir hverja einustu tölu í ytri lykkjunni.

Þá erum við komin með breytu sem heldur utan um summu og getum ferðast í gegnum vísa talna strengs, það sem við þurfum þá að gera er kasta hverju staki fyrir sig í tölu svo að við getum notað það í útreikningi.
Þá viljum við leggja það saman við summuna og uppfæra summuna með þessari samlagningu.

Þegar við erum búin með innri lykkjuna erum við komin með þversummu fyrir einhverja eina tölu úr talnalistanum sem ytri lykkjan er að skoða.
Þá viljum við spyrja er þessi þversumma stærri en 6?

Ef svo er þá viljum við prenta út töluna sem hafði þessa þversummu.

\begin{lstlisting}
for tala in range(100):
	talna_strengur = str(tala)
	tversumma = 0
	for stak in talna_strengur:
		tversumma += int(stak)
	if(tversumma > 6):
		print(tala)\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk5}
Síðasta for-lykkju æfingin.
Búið til lista með nokkrum strengjum, prentið út alla þá strengi sem innihalda táknið \texttt{a}.
Ábending, athugið að skoða kóðabút \ref{lst:lykkjur-in}.
\end{exercise}
\begin{Answer}[ref={lyk5}]
Athugið hér að nafnalistinn er ólíkur ykkar, þessi listi var gerður til að sýna að ANNA og Albert innihalda ekki táknið sem beðið var um og komast því ekki í gegn.
Ef óskað væri eftir að hafa það tákn líka væri hægt að rifja upp \texttt{.lower()} úr kafla \ref{k:strengir} eða hvernig eigi að nota rökvirkja í segð\footnote{þá í stað if "a" in stak væri if "a" in stak.lower(), eða með rökvirkja if "a" in stak or "A" in stak}.
	
\begin{lstlisting}
listi = ["Halldóra", "ANNA", "Sigurður", "Albert", "Jóna", "Valborg", "Unnur", "Pétur", "Unnar"]
for stak in listi:
	if "a" in stak:
		print(stak)\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk6}
Búið til while-lykkju sem keyrir alltaf en er brotin í fyrstu keyrslu.
\end{exercise}
\begin{Answer}[ref={lyk6}]
Hér er beðið um að láta skilyrði lykkjunnar vera \texttt{True} og nota lykilorðið \texttt{break}
	
\begin{lstlisting}
while(True):
	break\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk7}
Búið til breytu sem inniheldur einhverja tölu sem er á bilinu 0-10.
Búið svo til while-lykkju sem keyrir á meðan sú tala er lægri en 20.
Innan lykkjunnar ætlið þið að prenta út töluna og hækka hana svo um 1.
\end{exercise}
\begin{Answer}[ref={lyk7}]
Hér þarf að athuga inndráttinn á öllum aðgerðunum og að upphaflega lykkjuskilyrðið sé rétt skilgreint.
\begin{lstlisting}
tala = 3
while(tala < 20):
	print(tala)
	tala += 1\end{lstlisting}
\end{Answer}

\begin{exercise}\label{lyk8}
Búið til lista sem inniheldur nokkra strengi, en nokkur stök eru strengurinn \texttt{"popp"} þ.e. hann kemur nokkrum sinnum fyrir víðsvegar um listann.
Nú ætlið þið að búa til while-lykkju sem keyrir á meðan orðið \texttt{popp} er enn í listanum (eitt og sér til að einfala málin).
Það sem þið gerið svo innan í lykkjunni er að fjarlægja orðið \texttt{popp} úr listanum og prenta út breytta útgáfu.
Rifjið upp \texttt{.pop()} aðferðina úr kafla \ref{k:listar} ásamt \texttt{.index()} úr kafla \ref{k:strengir} eða flettið upp notkun á \texttt{.remove()} á netinu.
\end{exercise}
\begin{Answer}[ref={lyk8}]
Hér eru báðar útgáfur sýndar af þeim tillögum sem voru nefndar, en eins og með svo margt annað í forritun þá tókst ykkur mögulega að gera þetta öðruvísi.
Aðalmarkmiðið var að geta notað lykilorðið \texttt{in} í skilyrði lykkjunnar.
	\begin{lstlisting}
listi = ["nammi", "popp", "ávextir", "popp", "grænmeti", "popp", "hunang", "popp", "brauð"]
while("popp" in listi):
	visir = listi.index("popp")
	listi.pop(visir)
	print(listi)
		
#eða
while("popp" in listi):
	listi.remove("popp")
	print(listi)\end{lstlisting}
\end{Answer}