\chapterimage{chapter_head_2.pdf} % Chapter heading image

\chapter{Lykkjur}\index{Lykkjur}\label{k:lykkjur}

Í Python eru til tvær tegundir af lykkjum, þær heita \textbf{for} og \textbf{while}.
Við ætlum að kynnast því til hvers þær eru ætlaðar og hvers þær eru megnugar, í hvaða tilfellum á að nota hvora fyrir sig og lykilorð sem gera notkun þeirra öflugri.
Byrjum á því að skoða til hvers ,,að lykkja'' og hvað það eiginlega þýðir.
Það að nota lykkju þýðir að skrifa forritsbút sem keyrir endurtekið.

Nöfnin á for og while verða ekki þýdd sérstaklega í þessari bók, en við segjum t.a.m. ,,að gera eitthvað á meðan'' eða ,,gera eitthvað fyrir hvert stak''.

Tökum dæmi úr daglegu lífi; ef við viljum framkvæma einhverja aðgerð eins og að vaska upp búum við til reglu eins og að setja fyrst upp uppþvottahanska, láta vatnið renna og stafla öllu sem er óhreint við hliðina á vaskinum. 
Svo viljum við endurtaka aðgerðina að þrífa hvern hlut sem er öðru megin við vaskinn, þar til þeir eru allir komnir hreinir hinu megin.
Endurtekningin þarna er að taka upp hvern óhreinan hlut og þrífa hann.
Þá gætum við sagt að fyrir hvern hlut sem er hægra megin, viljum við þrífa hann og setja svo vinstra megin (fer eftir því hvernig vaskurinn snýr) og hætta þegar engir hlutir eru eftir hægra megin.
Þetta ferli að framkvæma sömu aðgerð á stök í mengi er einmitt það sem for lykkja getur gert.

Tökum annað dæmi úr daglegu lífi; ef við ætlum að bíða eftir einhverjum og framkvæma svo einhverja aðgerð þegar viðkomandi kemur þá myndum við væntanlega bíða þangað til að viðkomandi kemur.
Svo á meðan viðkomandi er ekki enn kominn þá höldum við áfram að bíða.
En þar sem við erum ekki tölvur þá myndum við ekki bíða endalaust, við myndum gefast upp.
Þetta ferli að halda áfram að framkvæma einhverja aðgerð þangað til að eitthvað skilyrði á ekki við er það sem while lykkja getur gert.

Til þess að keyra kóða endurtekið án þess að afrita og líma eða handvirkt keyra hann oft, þá notum við lykkjur.
Lykkjur eru kóðabútar sem keyrist endurtekið eftir ákveðnum reglum, þær lykkjur sem eru til í Python eru for lykkjur og while lykkur.
For lykkjur keyra fyrir hvert stak í ítranlegum hlut eða hverja tölu á bili (keyra ákveðið oft, í mesta lagi).
While lykkjur keyra á meðan skilyrðið fyrir keyrslu þeirra er satt (geta keyrt að ,,eilífu'').

\comment{
	
	%%%%%%%%%%%%%%%% comment byrjar
	
\section{Gagnleg lykilorð}\index{lykilord}\label{uk:lykkjulykilorð}
Áður en lengra er haldið í hvernig á að beita lykkjum er ágætt að nefna nokkur grunn lykilorð sem hjálpa okkur gríðarlega.
Þau eru \textbf{pass}, \textbf{continue}, \textbf{break} og \textbf{in}.

Það sem þessi lykilorð gera er má sjá í kóðabút \ref{lst:lykkjur-for-lykilorð}, sjá einnig kóðabúta \ref{lst:lykkjur-for} og \ref{lst:lykkjur-while}:
\begin{itemize}
	\item pass er lykilorð sem gerir ekkert, tölvan heldur áfram keyrslu sinni eins og ekkert hafi verið gert, nema að þarna er kóði sem er rétt inndreginn og gerir það að verkum að tölvan kvartar ekki yfir því að hafa búist við einhverju inndregnu en fengið ekkert.
	Þetta notum við þegar við erum ekki viss hvað á að vera í lykkjunni og við setjum þetta orð inn svo að við getum haldið áfram með annað sem átti að forrita.
	pass er gagnlegt sem staðhaldari (e. placeholder) þegar við erum ekki viss hvernig á að halda áfram en verðum að setja eitthvað því að annars fengjum við málskipunar villu (e. syntax error).
	Þetta lykilorð má nota annarsstaðar en í lykkjum og er einnig gagnlegt sem staðhaldari í föllum.
	\item continue er lykilorð sem lætur vélina stoppa þar sem hún er í lykkjunni, hunsa allt sem kemur á eftir því og fara efst í lykkjuna.
	Continue er gagnlegt þegar kemur að því að það er bara ákveðin virkni sem á að framkvæma undir vissum aðstæðum og við viljum ekki að vélin geri allar aðgerðir sem koma fram í lykkjunni okkar.
	Þetta lykilorð má einungis nota inni í lykkjum.
	\item break hættir keyrslu lykkjunnar, ólíkt continue þá förum við alfarið út úr lykkjunni þegar kallað er í þetta lykilorð og keyrir vélin næst kóða sem er ekki inndreginn undir lykkjunni.
	Þetta lykilorð má einungis nota inni í lykkjum.
\end{itemize}

Án þess að fara meira út í hvernig kóðinn fyrir þessi lykilorð virka þá er þess virði að nefna að þau eru ekki nauðsynleg í hverri lykkju sem við forritum hér eftir, þau eru gagnleg þegar þau eiga við og við þurfum að átta okkur á hvernær svo er.

Skoðum nú lykilorðið in áður en lengra er haldið til þess að öðlast dýpri skilning á því hvernig for lykkjan virkar.



Þegar þetta orð er notað í for lykkjum er þó ekki verið að setja fram segð heldur er verið að úthluta einhverri hlaupandi breytu tilteknu gildi úr ítranlegum hlut.
Það að hlutur sé ítranlegur þýðir að við getum horft á hann stak fyrir stak, skoðað eitt gildi úr honum í einu.
Eins og strengur hefur vísa þá getum við horft á hvert tákn fyrir sig með því að rúlla í gegnum vísana frá 0 og út í enda (eða einhverri annarri röð).
Listar eru einnig ítranlegir þar sem stökin í listum hafa vísa og því má horfa á hvert stak fyrir sig í heild sinni, hvort sem það er annar listi eða ein stök tala.
Heiltölur, fleytitölur og sanngildi eru ekki ítranleg og því ekki hægt að rúlla í gegnum þau með for lykkju.
Hægt er að komast framhjá því með því að kasta þeim í strengi.



%% búið að nota þetta !

\section{Lykkjur}\index{Lykkjur}
Til þess að keyra kóða endurtekið án þess að afrita og líma eða handvirkt keyra hann oft, þá notum við lykkjur.
Lykkjur eru kóðabútar sem keyrist endurtekið eftir ákveðnum reglum, þær lykkjur sem eru til í Python eru for lykkjur og while lykkur.
For lykkjur keyra fyrir hvert stak í ítranlegum hlut eða hverja tölu á bili (keyra ákveðið oft, í mesta lagi).
While lykkjur keyra á meðan skilyrðið fyrir keyrslu þeirra er satt (geta keyrt að ,,eilífu'').

%%%%%% comment endar
}

\section{For}\index{For lykkjur}
For lykkkjur nota lykilorðið \textbf{for} ásamt lykilorðinu \textbf{in}.
Það sem in gerir þegar það er notað eitt og sér er að spyrja hvort að \textit{eitthvað} sé ,,í'' \textit{einhverju öðru} (sjá kóðabút \ref{lst:lykkjur-in}) en í sem hluti af for lykkju þá er það in sem úthlutar lykkjunni næsta staki úr menginu til að skoða.
Þannig að þetta býr til segð sem skilar sanngildi eða einu tilteknu tákni eða staki úr hlut.
Nú skulum við líta á kóðabút \ref{lst:lykkjur-for} til að átta okkur á því hvernig lykkjan er notuð, hvernig við beitum inndrætti til að skilgreina stef lykkjunnar (það sem tilheyrir henni) og hvernig skilyrðissetningar bætast við þetta.

\begin{lstlisting}[caption=Lykilorðið in, label=lst:lykkjur-in]
print('er táknið a í strengum Valborg?')
print("a" in "Valborg")

print('er táknið x í Valborg?')
print("x" in "Valborg")
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
'er táknið a í strengum Valborg?'
True
'er táknið x í strengum Valborg?'
False
\end{lstlisting}
\lstset{style=venjulegt}

Eins og sést í kóðabút \ref{lst:lykkjur-in} þá virkar in nokkuð svipað því sem orðið í gerir í setningu.
Ekki gleyma þessu lykilorði við lykkjugerðina.
Sjá ítarefni í lok kaflans um önnur lykilorð sem gagnast við forritun á lykkjum.

\begin{lstlisting}[caption=For lykkjur, label=lst:lykkjur-for]
# við byrjum á að skilgreina streng
strengur = "Valborg"
print(strengur)

# athugum hvernig á að setja upp okkar fyrstu lykkju
for stafur in strengur:
	print(stafur)

print()

for stafur in strengur:
	# við vitum að það er a í Valborg svo þetta mun einhvern tímann gerast
	if(stafur == 'a'):
		print(stafur)
		
print()

# Skoðum nú hvernig við ítrum í gegnum lista:
listinn_minn = [0, "0", [0]]

for x in listinn_minn:
	# nú hleypur x í gegnum stökin í breytunni listinn_minn
	print(x)
	
# þetta skilar okkur úttakinu
# 0
# 0
# [0]
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
Valborg
V
a
l
b
o
r
g
	
a
	
0
0
[0]
\end{lstlisting}

\lstset{style=venjulegt}

Tökum eftir í kóðabút \ref{lst:lykkjur-for} að breytan sem notuð er til að ítra í gegn er ekki skilgreind áður en við komum að lykkjunni, við þurfum ekki að gera x =  eða strengur = áður en við komum að lykkjunni.
Það er vegna þess að breytan er skilgreind inni í lykkjunni fyrir okkur, hún er áfram aðgengileg en er ósköp gagnslaus eftir keyrsluna svo okkur er alveg sama um hana, hún er svokölluð tímabundin (e. temporary) breyta sem hættir að skipta máli eftir notkun innan lykkjunnar.

Við sjáum einnig að þegar við settum inn skilyrðissetningu þá bættist við annar inndráttur, það er vegna þess að inndráttarnotkunin breytist ekki sama hvar við erum að nota kóða sem krefst inndráttar heldur dregst kóðinn bara lengst til hægri eftir því sem við förum innar. 
Því getur verið ágætt að takmarka hreiðrun til þess að kóðinn sé sem læsilegastur.

For lykkjur eru því helst gagnlegar þegar við vitum hversu oft við viljum að lykkjan keyri, því til stuðnings ætlum við að skoða innbyggða fallið \textbf{range()} sem gefur okkur hlut af tölum á ákveðnu bili.
Fallið range() tekur við sömu viðföngum eins og hornklofarnir þegar við sóttum nokkur tákn upp úr streng eða lista, nema þau eru viðföng í fall svo þau eru aðgreind með kommum en ekki tvípunktum.
Viðföngin eru heilartölur og þeim er raðað svona:

\begin{enumerate}
	\item talan sem á að byrja að nota (hér má sleppa því að setja þetta inn því að sjálfgefið gildi er 0)
	\item talan sem á að hætta fyrir framan (þetta verður að setja inn, því að þetta er aðalatriðið)
	\item tala sem segir til um skrefastærðina (sjálfgefið gildi er 1 og þessu má sleppa)
\end{enumerate}

\begin{lstlisting}[caption=range() fallið, label=lst:lykkjur-range]
# við viljum prenta út sléttar tölur á bilinu 0 og upp í 10 þar sem 10 er með
for tala in range(11):
	# við tókum fram að við hættum fyrir framan 11 og næsta heila tala þar fyrir neðan er 10 svo hún er með
	if(tala%2 == 0):
		# ef afgangurinn úr deilingu með tveimur er jafngildur 0, þá hlýtur tala að vera deilanleg með tveimur og er því slétt
		print(tala)
		
# þetta skilar okkur úttakinu:
# 0
# 2
# 4
# 6
# 8 
# 10

# við viljum núna skoða hvaða tölur eru deilanlegar með 3 á bilinu 10 upp í 20, við viljum ekki telja 20 með.
for tala in range(10, 20):
	if(tala%3 == 0):
		print(tala)

# þetta skilar okkur úttakinu
# 12
# 15
# 18

# við viljum núna prenta aðrahvora tölu á bilinu 100 til 106, báðar meðtaldar
for tala in range(100, 107, 2):
	print(tala)
	
# þetta skilar okkur úttakinu:
# 100
# 102
# 104
# 106

# við viljum að lykkjan okkar prenti út einhver skilaboð ákveðið oft, segjum 3 sinnum.
for x in range(3):
	# fyrst er x 0, svo 1, svo 2, sem þýðir að lykkjan keyrir þrisvar sinnum
	print('bílalúgudýraspítali')
	
# þetta skilar okkur úttakinu 
# bílalúgudýraspítali
# bílalúgudýraspítali
# bílalúgudýraspítali
\end{lstlisting}

Nú vitum við að ef okkur vantar eitthvað ákveðið oft, eða við vitum nákvæmlega hversu oft við viljum að lykkjan keyri þá getum við beitt range() fallinu.
Nú skulum við skoða hvernig lykkju lykilorðin sem við skoðuðum í undirkaflanum \nameref{uk:lykkjulykilorð} (\ref{uk:lykkjulykilorð}) nýtast með for lykkjum í kóðabút \ref{lst:lykkjur-for-lykilorð}.

\begin{lstlisting}[caption=Lykilorðin pass\, continue og break notuð með for lykkju, label=lst:lykkjur-for-lykilorð]
# við viljum búa til lykkju sem á að rúlla í gegnum 1000 tölur en við erum ekki viss hvað á að gera innan í lykkjunni
for x in range(1000):
	pass
# hér fáum við ekkert úttak en jafnframt enga villu.

# við viljum búa til streng úr stórum tölum í einhverjum lista, tölum sem eru hærri en 50
storar_tolur = ""
for x in [1, 2, 52, 9, 53, 2]:
	if (x < 50):
		continue
		print(x)
	storar_tolur += str(x)

print(storar_tolur)
# þetta skilar okkur úttakinu
# 5253

# við viljum búa til lykkju sem ítrar í gegnum lista af tölum en ef hún sér töluna 13 þá hættir hún keyrslu
listi_af_tolum = [1,5,7,9,13,15,17,18]
for tala in listi_af_tolum:
	if(tala == 13):
		break
		print(tala)
	else:
		print(tala)

# þetta skilar okkur úttakinu
# 1
# 5 
# 7
# 9
\end{lstlisting}

Tökum eftir að í kóðabút \ref{lst:lykkjur-for-lykilorð} þá er tilfellið sem notað er til að sýna continue kannski ekki mjög nytsamlegt þar sem auðvelt væri að gera bara if (x > 50) : storar\_tolur += str(x) en þar sem við erum að reyna að kynnast notkun lykilorðsins þá er þetta ágætis dæmi.
Það sem gerist er að ef x < 50 er satt þá förum við inn í skilyrðissetninguna og þar sem við förum inn í hana þá rekumst við á orðið continue og um leið og það er lesið þá förum við efst í lykkjuna og úthlutum x nýju staki, print(x) gerist ekki og því er eina úttakið okkar það sem við prentum eftir að keyrslu lykkjunnar lýkur.
Við sjáum að lykkjunni er lokið því að print(storar\_tolur) kemur fram í sama inndrætti og for lykilorðið, sem þýðir að kallið print(storar\_tolur) tilheyrir ekki lykkjunni, er ekki undir henni.

Þegar við notum break gerist það sama, um leið og break er notað þá hættir keyrsla lykkjunnar, breytan tala fær ekki nýtt gildi og hún endar með sem talan 13.
Að sama skapi þá prentum við ekki út 13 því að break gerist fyrir ofan print() kallið.
Þetta lykilorð getur reynst ómetanlegt þegar við skoðum while lykkjur.

\section{While}\index{While lykkjur}
While lykkjur nota lykilorðið \textbf{while} og keyra ,,á meðan'' eitthvað skilyrði er enn satt.
Þær eru helst ganglegar þegar við vitum ekki hvað við viljum að lykkjan keyri lengi eða þegar við viljum að hún keyri endalaust nema annað sé tekið fram (t.d. með break).

Skilyrðið fyrir keyrslunnar er metið sem sanngildi, annað hvort með sanngildinu sjálfu eða segð sem skilar sanngildi.
Þá gefst okkur tækifæri á að forrita lausn á vanda eins og ,,ef það er enginn eftir í stofunni á að slökkva ljósið'' og forritið keyrir á meðan ,,einhver er eftir í stofunni''.
Þarna þurfum við ekki að gera annað en að fylgjast með aðstæðum.
While lykkjur eru vandmeðfarnar og harla líklegt að lenda í því að skrifa lykkju sem keyrir endalaust við fyrstu notkun.
Þær eru jafnframt öflugar til að leysa ýmsan vanda sem krefst þess að aðstæður hverju sinni séu skoðaðar.

Skoðum kóðabút \ref{lst:lykkjur-while} til þess að sjá hvernig má auðveldlega lenda í vandræðum við gerð slíkra lykkja og hvernig uppsetning þeirra lítur út.


\begin{lstlisting}[caption=while lykkjur, label=lst:lykkjur-while]
# Grunnuppbyggingin kynnt:
while(True):
	# inndreginn kóði sem tilheyrir lykkjunni - stef lykkjunnar
	pass
	
# þessi lykkja keyrir að eilífu vegna þess að skilyrðið fyrir henni er True og ekkert breytir því í stefi hennar

while(True):
	# nú ætlum við að reyna að komast út
	break
	
# við komumst út úr lykkjunni, hún keyrði einu sinni og hætti strax keyrslu, ekki mjög gagnleg lykkja en hún keyrði allavega ekki að eilífu

while(False):
	print('þetta mun aldrei prentast því að stef lykkjunnar mun aldrei keyrast')

# prófum núna að gera segð sem skilyrði

x = 5
while(x > 1):
	# Við munum keyra stef lykkjunnar að minnsta kosti einu sinni þar sem segðin er sönn í fyrstu keyrslu, 5 er vissulega stærri en 1
	# en nú verðum við að gera eitthvað sem hefur áhrif á x þannig að lykkjan okkar eigi möguleika á að hætta, það er við verðum að gera það að verkum að x > 1 verði einhvern tímann ósatt.
	if(x > 1):
		print("talan er", x, "og hún er enn stærri en 1")
		x -= 1
		
# úttakið verður:
# talan er 5 og hún er enn stærri en 1
# talan er 4 og hún er enn stærri en 1
# talan er 3 og hún er enn stærri en 1
# talan er 2 og hún er enn stærri en 1

# Tökum aðeins sértækara dæmi, sem byggir á sauðakóða en ekki Python kóða sem hægt er að keyra. 
# Til þess að sjá fyrir okkur betur hvað er að gerast.

fjoldi_i_stofu = 5
while(True):
	if(fjoldi_i_stofu == 0):
		slökkva ljós
		break
		
	# við komumst bara hingað ef það er einhver í stofunni svo við ætlum að telja fjölda í stofu aftur
	fjoldi_i_stofu = talning
	
# Stef þessarar lykkju byggir á því að tölvan viti hvað slökkva ljós og talning þýðir, en þar sem ætlunin var ekki að gera kóða sem virkar heldur sýna lesanda virknina fær lykkjan að vera í friði svona.


\end{lstlisting}

Annað sem má gera við while lykkjur er að koma fram við þær sem skilyrðissetningu sem má fá else klausu aftan við sig sem keyrist þegar skilyrði lykkjunnar verður ósatt.

\begin{lstlisting}[caption=Ap nota else með while, label=lst:lykkjur-while-else]
# Við viljum áfram skoða það hvenær á að slökkva ljósin og við getum gert það svona:
while(fjoldi_i_stofu > 0):
	fjoldi_i_stofu = talning
else:
	slökkva ljósin
	
# nú slökkvast ljósin þegar fjoldi_i_stofu er orðinn 0.

# skoðum dæmi sem hægt er að keyra

x = 5
while(x > 1):
	print("talan er", x, "sem er stærra en 1")
	x -= 1 
else:
	print("nú er talan orðin 1 því 1 er ekki stærri en 1 -->", x)
	
# þetta skilar okkur úttakinu
# talan er 5 sem er stærra en 1
# talan er 4 sem er stærra en 1
# talan er 3 sem er stærra en 1
# talan er 2 sem er stærra en 1
# nú er talan orðin 1 því 1 er ekki stærri en 1 --> 1
\end{lstlisting}
