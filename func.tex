\chapterimage{chapter_head_2.pdf} % Chapter heading image

\chapter{Föll}\index{Föll}\label{k:föll}
Föll (e. functions), eins og lykkjur, eru kóðabútar sem má keyra oft.
Þau líkjast hins vegar frekar skilgreiningum eða uppskriftum frekar en lykkjum þar sem það þarf að \emph{nota} þau til þess að þau geri eitthvað ekki bara búa þau til.

Ágætar samlíkingar fyrir föll eru til dæmis stærðfræðilegar skilreiningar, uppskriftir eða réttir á matseðli.

\begin{itemize}
	\item Stærðfræðilega skilgreining á hring er eftirfarandi: ,,Hringur er safn punkta í gefinni fjarlægð frá ákveðinni miðju'' sem þýðir að til þess að búa til hring þarf einhverja miðju og teikna svo punkta í einhverjum tilteknum radíus frá þeirri miðju.
	Skilgreining þessi réttir okkur ekki hring með miðju í punkti (0,0) og radíus 3 þegar við setjum hana fram.
	En vegna þess að við eigum hana getum við notað hana til þess að búa til alla þá hringi sem okkur henta.
	\item Uppskrift í matreiðslubók er ákveðin runa af aðgerðum sem þarf að framkvæma, eins og kom fram í kafla \ref{uk:keyra-koda} um hnetusmjörssamlokuna, það að skrifa niður röð aðgerðanna og það sem þarf til er ekki jafngilt því að framkvæma aðgerðirnar og enda með matinn í höndunum
	\item Réttur á matseðli er skilreindur á ákveðinn hátt, með ákveðnu meðlæti og þess háttar.
	Við gætum þó viljað gera breytingu á þessari skilgreiningu til þess að fá mat sem er okkur meira að skapi en það sem kokknum datt í hug.
	Það gerum við með því að biðja um skilgreininguna á réttinum nema með breytingum.
\end{itemize}

Höfum þessar samlíkingar í huga þegar kemur að því að skrifa og beita föllum, því það hjálpar að átta sig á því strax að þegar við skilgreinum föll þá búum við til uppskrift sem hægt er að fylgja án þess þó að biðja vélina um að fylgja þeim.

Við höfum séð föll áður, eins og: 

\begin{itemize}
	\item print("fyrsta viðfangið", "næsta viðfang sem fallið tekur", "print er sér á báti, því það tekur við svo mörgum viðföngum")
	\item len("breyta sem ég vil vita lengdina á")
	\item range(0,50)
	\item type("breyta sem viðfang sem ég vil vita týpuna á")
\end{itemize}

Þetta eru innbyggð föll\footnote{\href{https://docs.python.org/3/library/functions.html}{Python skjölunin} inniheldur lista og upplýsingar um öll innbyggð föll}, það að þau séu innbyggð þýðir að við getum notað þau án þess að ná í einhvern annan kóða (sjá kafla \ref{k:import}) og eru þau flest svo gagnleg að ákveðið var að gefa notendum auðveldara aðgengi að þeim.

Við höfum þó séð fleiri föll sem eru aðferðir (e. methods), munurinn liggur í því að aðferð er hengd aftan á hlut með punkti og er fall sem keyrir á þann hlut en fall keyrir þegar kallað er í það og óþarfi er að hengja það við eitthvað annað.
Allar aðferðir eru föll, ekki öll föll eru aðferðir.

Til dæmis sáum við aðferðirnar .capitalize() á strengi og .sort() á lista.

Föll (e.function) og aðferðir (e. methods) eru aðgreinanlegar að þessu leiti, annað er skilgreint og virkar eins og það á að gera fyrir þau gögn sem þau eiga að virka á en aðferðir er eitthvað sem er fast við hlut og eiga að verka á þann hlut.

Við sjáum svo í öðrum hluta bókarinnar hvernig við skilgreinum aðferðir.

\section{Tilgangur falla}\index{Tilgangur falla}
Eins og með allt annað sem við lærum er gott að vita hvers vegna við erum á annað borð að læra um það.
Ástæðan fyrir því að við viljum læra um föll er að þau eru eitthvað það öflugasta sem við beitum í forritun, skoðum eftirfarandi lista til að skilja hvers megnug þau eru:

\begin{itemize}
	\item Við getum endurnýtt föll í stað þess að skrifa upp sama kóðann á bakvið þau á mörgum stöðum.
	\item Við getum gert föll aðgengileg út fyrir skjalið þar sem við skilgreindum þau.
	\item Við getum unnið með inntak frá notanda á skilvirkan máta.
	\item Föll halda utan um einhverja tiltekna virkni sem við viljum hafa aðgang að og eru skilvirk leið til að afmarka virkni.
\end{itemize}

Við höfum hingað til ekki fengist við meira en að átta okkur á grunnvirkni í forritun með hjálp Python en nú erum við komin á þann stað að við getum farið að leysa flókin vandamál.


\section{Að skilgreina föll}
Til þess að skrifa föll þurfum við að læra nýtt lykilorð, \textbf{def}.
Það stendur fyrir \emph{define} eða að skilgreina, þar sem við erum með því að búa til ákveðna skilgreiningu sem vélin getur svo notað til þess að framkvæma aðgerðir.

Það næsta sem þarf er að búa til nafn á fallið, nafnið er það sem vð notum til þess að beita fallinu okkar eftir að hafa skilgreint það.
Alveg eins og með aðrar breytur þá megum við ekki nota föll fyrr en búið er að skilgreina þau.

Þegar það er komið getum við byrjað að forrita virkni fallsins okkar, allt sem er a.m.k. einum inndrætti innar en def lykilorðið tilheyrir fallinu okkar.

Í kóðabút \ref{lst:foll-skilgreining} sjáum við hvernig á að búa til skilgreininguna og svo hvernig á að beita fallinu sem við bjuggum til, við ætlum að skoða minni úr forritun\footnote{Venjulega það fyrsta sem gert er í nýju forritunarmáli er að prenta út á staðalúttak "Halló Heimur!", þetta er skemmtileg hefð sem óþarfi er að gera miklar breytingar á.} og prenta út einfalda setningu.

Takið eftir að fallið er skilgreint og svo er það sem er inndregið undir því það sem fallið gerir, fyrir neðan skilgreininguna (ekki lengur inndregið undir henni) er svo kallað í fallið með því að skrifa nafnið á því og tóma sviga fyrir aftan nafnið.
Svigarnir eru nauðsynlegir því að þannig segjum við vélinni að við séum að kalla í fall.

\begin{lstlisting}[caption=Föll skilgreind, label=lst:foll-skilgreining]
def prentunarfall():
	print("Halló Heimur!")

prentunarfall()
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
Halló Heimur!
\end{lstlisting}
\lstset{style=venjulegt}

Ástæðan fyrir því að svigarnir eru tómir í línu 4 er vegna þess að þeir eru tómir í línu 1 í skilgreiningunni.
Prófið að setja eitthvað á annan staðinn en ekki hinn og keyra svo kóðann.

\section{Viðföng}
Nú höfum við séð að hægt er að búa til skilgreiningar á föllum, en tökum eftir að í kóðabút \ref{lst:foll-skilgreining} þá eru tómir svigar fyrir aftan nafnið á fallinu.
Þessir svigar eru ekki þarna að ástæðulausu og þeir eru ekki tómir í þessum kóðabút að ástæðulausu heldur.

Það sem fer inn í svigana eru svo kölluð \emph{viðföng} (e. arguments), viðföngin skiptast í tvær tegundir \textbf{stöðubundin} (e. postitional) og \textbf{sjálfgefin} (e. named).
Hægt er að nota bæði í bland og eina viðmiðið er að gefa kost á þeim viðföngum sem notandinn ætti að fá eitthvað um að segja.

\begin{lstlisting}[caption=Föll með viðföngum, label=lst:foll-vidfong]
def prentunarfall(vidfang):
	print("Halló", vidfang, "!")
	
prentunarfall("Valborg")
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
Halló Valborg!
\end{lstlisting}
\lstset{style=venjulegt}

Annað sem mikilvægt er að átta sig á er að viðföng fá breytuheiti sem eru aðeins aðgengileg innan fallsins en ekki utan þess.
Eins og breytan \texttt{vidfang} er aldrei formlega skilgreind svo við sjáum, allt í einu er hún bara komin þarna inn í svigann í línu 1 og strax notuð í línu 2.
Það er í rauninni ekki keyrsluröðin, það sem gerist er að vélin fær skilgreininguna á \texttt{prentunarfall} og að þeirri skilgreiningu fylgir einhver staðhaldari sem mun seinna fá eitthvað gildi.
Sem er það sem gerist í línu 4, við gefum breytunni gildið \texttt{"Valborg"}.

Við ætlum þá að skoða nýtt hugtak áður en við skoðum stöðubundin og sjálfgefin viðföng til þess að átta okkur á hvar þessi staðhaldari er í raun til.

\subsection{Gildissvið}\label{uk:gildissvið}
Gildissvið (e. scope) skiptis í staðvært (e. local) og víðvært (e. global). 
Það sem gildissvið þýðir er hvar eitthvað sé aðgengilegt.
Ef við búum til Jupyter vinnubók eða .py skjal þar sem við skilgreinum breytuna x er sú breyta ekki aðgengileg í öðru skjali.
Hins vegar ef við búum til breytu í vinnubók í einhverri sellu, með engum inndrætti, er sú breyta hluti af viðværu gildissviði og aðgengileg öllum sellum og allri virkni sem við viljum beita þessari breytu í.
En þegar við skilgreinum föll þá förum við inn á staðvært gildissvið sem þýðir að þegar kallað er í breytu byrjar vélin á að skoða hvort að breytan sé skilgreind innan þess sviðs, ef ekki þá notar hún víðværa gildissviðið.
En ef okkur langar að nota breytu sem var skilgreind innan einhvers falls (einhvers staðværs gildissviðs) þá höfum við ekki aðgang að henni í hinu víðværa gildisssviði.

Þetta virðist ótrúlega flókið í svona tæknilegu og löngu máli en skoðið kóðabút \ref{lst:foll-gildissvid} og skoðið hvaða x er verið að vísa í hverju sinni.
Það x sem er skilgreint í línu eitt er hluti af víðværu gildissviði og það sem er skilgreint innan fallsins í línu 3 er hluti af staðværu gildissviði og þetta eru því tvö mismunandi x sem hafa ekki áhrif hvort á annað.

\begin{lstlisting}[caption=Gildissvið, label=lst:foll-gildissvid]
x = 20
def gildissvids_prufa(x):
	x = x + 20
	print(x)

gildissvids_prufa(10)

def prufa_tvo():
	print(x)

prufa_tvo()
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
30
20
\end{lstlisting}
\lstset{style=venjulegt}

Það má líta á þetta eins og að horfa á gosbrunn, þar sem víðværa gildissviðið er þar sem vatnið kemur upp efst í brunninum og svo fellur það niður í staðværa gildissviðið sem er neðri hluti brunnsins.
Allt sem er til í efri hlutanum getur neðri hlutinn fengið en það sem er í neðri hlutanum fer ekki upp (í þessari samlíkingu ætlum við að horfa framhjá innri virkni gosbrunnsins og sjá bara fyrir okkur hvernig er að horfa á fallegan gosbrunn sem er á tveimur eða fleiri hæðum).

Ástæða þess að það er mikilvægt að nefna gilssvið að svo stöddu er vegna þess að byrjendur vilja oft ruglast á breytunotkun með þessum hætti og halda að viðföng séu skilreindar breytur sem hægt sé að láta fallið hafa aftur, þegar það er líkara hugmyndinni um breytuna en ekki breytan sjálf.

Þetta skýrist þegar við skoðum stöðubundin viðföng.

\subsection{Stöðubundin viðföng}
Stöðubundin viðföng (e. postitional arguements) fá nafn og röðun þegar þau eru sett í skilgreiningu á falli.
Nöfnin á þeim lúta sömu lögmálum og nafnavenjur sem við höfum séð á breytum og er best að hafa nöfnin lýsandi fyrir virkni þeirra.

Þegar við köllum í fall sem skilgreint er með einu viðfangi og við gefum því engin viðföng þá fáum við villu, villumeldingin sem við fáum upp segir vantar eitt stöðubundið viðfang.
Í kóðabút \ref{lst:foll-villa-vidfang} sjáum við þessa villu og í kóðabút \ref{lst:foll-stodubundin-kynning} sjáum við hvernig má komast hjá þessari villu og þá hvernig viðföngin eru í raun stöðubundin, svo loks í kóðabút \ref{lst:foll-stodubundin-betra} sjáum við hvernig breytuheitin geta hjalpað okkur við notkun viðfanganna.

\begin{lstlisting}[caption=Villumelding fyrir ranga notkun á viðföngum, label=lst:foll-villa-vidfang]
def fall_sem_tekur_vid_streng(strengur):
	print(strengur.capitalize())
fall_sem_tekur_vid_streng()
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
<ipython-input-128-0e947c4208c2> in <module>
1 def fall_sem_tekur_vid_streng(strengur):
2         print(strengur.capitalize())
----> 3 fall_sem_tekur_vid_streng()

TypeError: fall_sem_tekur_vid_streng() missing 1 required positional argument: 'strengur'
\end{lstlisting}
\lstset{style=venjulegt}

Hér sjáum við að breytuheitið okkar hjálpar okkur við að sjá hvað það er sem við eigum að setja inn, það er einhvers konar stengur.
Það er ekki breytan strengur því að þá fengjum við nafnavillu (við eigum enga breytu sem heitir strengur).

Við þurfum þá að kalla í fallið og setja eitthvað inn í svigann þegar við köllum í það, eins og 'Halló Heimur!' sem myndi þá prenta út "Halló heimur!".

Nú viljum við skoða röðunina á viðföngunum ef fallið tekur við nokkrum.
Athugum svo að það skiptir máli í hvað röð viðföngin eru sett inn, í línum 4-6 í kóðabút \ref{lst:foll-stodubundin-kynning} er verið að setja inn fyrir \texttt{a}, \texttt{b} og \texttt{c} en aldrei í sömu röð og því er úttakið alltaf mismunandi.

\begin{lstlisting}[caption=Stöðubundin viðföng kynnt, label=lst:foll-stodubundin-kynning]
def fall(a,b,c):
	print(a**b/c)

fall(1,2,3)
fall(2,3,1)
fall(3,1,2)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
0.3333333333333333
8.0
1.5
\end{lstlisting}
\lstset{style=venjulegt}

Athugum að í kóðabút \ref{lst:foll-stodubundin-kynning} þá er hvorki nafnið á fallinu né viðfanga þess sérlega lýsandi.
Nafnið á fallinu gefur ekki til kynna hvað það gerir og nöfnin á viðföngunum segja ekkert til um hvernig þau verða notuð eða af hvaða týpu þau eiga að vera.
Þetta fall væri mögulega nothæft fyrir okkur sjálf, en um leið og annað fólk á að fara að nota kóðann okkar þá er eins gott að venja sig af því að nota svona ógegnsæjar nafnavenjur.
Betra væri, fyrir þessa tilteknu formúlu að finna eitthvað nafn á hana eða nefna fallið eftir nákvæmri virkni formúlunnar og nefna svo viðföngin eftir því hvar þau eru sett inn í formúluna.

Hingað til hafa öll föllin okkar verið að prenta út, við viljum geta gert eitthvað annað en það.
Við sjáum í kafla \ref{uk:skilagildi} hvað hægt er að gera annað en að prenta bara út.

Lítum á kóðabút \ref{lst:foll-stodubundin-betra} til að sjá hvernig betur mætti fara með skilgreininguna úr kóðabút \ref{lst:foll-stodubundin-kynning}.
Takið eftir að úttakið er að sjálfsögðu það sama því að kallað er í fallið með sömu tölum, það eina sem breyttist er að nú vitum við hvað er að fara inn fyrir hvað í útreikningunum.

\begin{lstlisting}[caption=Stöðubundin viðföng með skýrari breytuheitum, label=lst:foll-stodubundin-betra]
def hefja_i_veldi_og_deila(grunntala,veldisvisir,deiling):	
	print(grunntala**veldisvisir/deiling)

hefja_i_veldi_og_deila(1,2,3)
hefja_i_veldi_og_deila(2,3,1)
hefja_i_veldi_og_deila(3,1,2)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
0.3333333333333333
8.0
1.5
\end{lstlisting}
\lstset{style=venjulegt}

Ef við rifjum upp hugtakið gildissvið úr fyrri undirkafla og skoðum hvernig það á við um kóðabút \ref{lst:foll-stodubundin-betra} þá sjáum við að fallið heitir \texttt{hefja\_i\_veldi\_og\_deila} og það tekur við þremur viðföngum sem verða að vera sett inn í þeirri röð sem fallið kallar eftir þeim, fyrst grunntöluna svo töluna sem á að nota sem veldisvísi og svo loks töluna sem á að deila með.

Nú er við hæfi að taka fram hvers konar byrjenda mistök eru algeng hérna og ef meiri skilningur værir fyrir hendi á hvernig gildissvið virka myndu þessi mistök eiga sér sjaldnar stað.
Það er að breyturnar grunntala, veldisvisir og deiling eru hluti af staðværu gildissviði þessa falls, neðri hluta brunnsins sem efri hlutinn getur ekki sótt vatn úr.
Þess vegna getum við ekki kallað í fallið svona: \texttt{hefja\_i\_veldi\_og\_deila(grunntala,veldisvisir,deiling)} (það er skrifað inn nöfnin á viðföngunum eins og við eigum þau til sem breytur) því að þá erum við að biðja víðværa gildissviðið (efri hluta brunnsins) um að finna hjá sér einhverjar breytur sem heita þetta til þess að setja inn í staðinn fyrir þessar skilgreiningar.

Ef við horfum aftur til skilgreiningar hrings og myndum búa til fall sem lýsir því hvernig eigi að teikna hring með ákveðna miðju og tiltekinn radíus.
Nú ef okkur langar til að fá einhvern hring í hendurnar getum við ekki sagt við vélina láttu okkur hafa hring með radíus \texttt{radius} nema að sú breyta hafi þegar fengið gildið sem við ætluðum að nota.
Vélin, ef við manngerum hana örlítið, myndi þá segja ,,það er það sem þú átt að segja mér, hvað radíus er, ég veit ekkert hvað það er!''
Til þess að nota fallið þurfum við að gefa annað hvort upp gögn af týpunni sem um var beðið eða breytu sem er aðgengileg utan fallsins (annað hvort úr víðværu gildissviði eða víðara staðværu gildissviði) sem inniheldur gögn af týpunni sem um var beðið.

Tölvan reynir ekki að hafa vit fyrir okkur, hún lagar ekki inntakið þegar við setjum það í augljóslega ranga röð.
Hún annað hvort vinnur með vitlausa inntakið okkar og við fáum í hausinn eitthvað úttak sem við skiljum ekki eða við fáum villu.
Kíkið á kafla \ref{k:villur} til þess skoða hvernig megi taka á því þegar upp koma villur en við viljum að kóðinn okkar haldi samt áfram að keyra.

\subsection{Sjálfgefin viðfögn}\label{uk:föll-sjálfgefin}
Ef við viljum vera viss um að við getum unnið með eitthvað viðfang án þess að neyða notandann til þess að gefa okkur það getum við notað sjálfgefin viðföng (e. named arguments, default arguments), einnig kölluð nefnd viðföng.
Þá skilgreinum við fall og búum til skilgreiningu á viðföngunum þar sem við tökum þau fram.
Skoðum þetta í kóðabút \ref{lst:foll-sjalfgefin} þar sjáum við hvernig megi nota bæði stöðubundin og sjálfgefin saman og hvernig megi kalla í föll sem eru með bæði.

Þegar bæði er notað saman í bland þá þarf að setja stöðubundnu viðfögnin fremst og svo á eftir þeim koma sjálfgefnu viðföngin.

Athugum að bæði er í lagi að nota sjálfgefin viðföng sem stöðubundin, en þá verðum við líka að setja þau inn í réttri röð, og hins vegar að skrifa inn nafnið á viðfanginu og skilgreina það sem eitthvað (hvort sem það séu einhver gögn sem við setjum beint inn eða notum breytu), einnig er í lagi að sleppa því að taka þau fram.

\begin{lstlisting}[caption=Sjálfgefin viðföng kynnt, label=lst:foll-sjalfgefin]
def hefja_i_veldi_og_deila(grunntala = 1,veldisvisir = 1,deiling = 1):	
	print(grunntala**veldisvisir/deiling)
	
hefja_i_veldi_og_deila()
hefja_i_veldi_og_deila(2, 2, 2)
hefja_i_veldi_og_deila(deiling = 2)
hefja_i_veldi_og_deila(deiling = 2, veldisvisir = 1, grunntala = 4)

def hefja_i_veldi_og_deila_2(grunntala,veldisvisir,deiling = 1):	
	print(grunntala**veldisvisir/deiling)

print()
hefja_i_veldi_og_deila_2(1,2) 
hefja_i_veldi_og_deila_2(1, 2, 2) 
hefja_i_veldi_og_deila_2(1, 2, deiling = 4) 

print()
tala = 2
veldi = 2
deila = 2
hefja_i_veldi_og_deila_2(tala, veldi, deiling = deila)
\end{lstlisting}
\lstset{style=uttak}
\begin{lstlisting}
1.0
2.0
0.5
2.0

1.0
0.5
0.25

2.0
\end{lstlisting}
\lstset{style=venjulegt}

Skoðið hér hvernig er kallað í fallið \texttt{hefja\_i\_veldi\_og\_deila} í línum 4-7 í kóðabút \ref{lst:foll-sjalfgefin} og berið það saman við hvernig var kallað í föllin í kóðabútum \ref{lst:foll-villa-vidfang} og \ref{lst:foll-stodubundin-betra}.
Þar þurfti alltaf að setja inn öll viðföng annars fékkst villa, en vegna þess að í  skilgreiningunni kom fram að sjálfgefin gildi eru ákveðnar tölur sem hægt er að nota í útreikningum þá lendir vélin ekki í vandræðum þegar einhver viðföng vantar.

Að sjálfsögðu megum við ekki setja inn of mörg viðföng, þá lendum við í vandræðum, prófið ykkur áfram með það.

Takið líka eftir í línu 7 er kallað í viðföngin í ,,rangri'' röð með því að nota nöfnin á þeim.
Prófið að gera það með línu 21, að setja breyturnar inn fyrir viðföngin í annarri röð.
Takið eftir því að stöðubundnu viðföngin verða að koma á undan.

Í línu 5 og 14 er kallað eins í föllin, þá er komið fram við sjálfgefnu viðföngin eins og stöðubundin.
Þannig að sett er inn fyrir viðföngin í þeirri röð sem þau eru skilgreind í línum 1 og 9.

Eins og hefur komið fram er nauðsynlegt að gera tilraunir og prófanir til að ná árangri og skilningi á efninu.


\section{Skilagildi}\label{uk:skilagildi}
Nú höfum við séð hvernig á að búa til föll, við höfum séð hvernig á að láta föllin vinna með sjálfgefið inntak og það næsta sem við viljum skoða er hvernig á að láta föllin okkar skila gildum þannig að hægt sé að fá útkomu úr þeim sem megi nota áfram.
Við höfum séð hvernig aðferðir á strengi skila oft til okkar öðrum streng sem byggir á strengnum sem við notuðum aðferðina á (sjá kóðabút \ref{lst:str-adferdir}), til þess að geta notað úttkomuna þá getum við búið til breytu sem grípur það sem aðferðin \textit{skilar}.
Í kóðabútum \ref{lst:foll-stodubundin-betra} og \ref{lst:foll-sjalfgefin} þá er fallið hefja\_i\_veldi skilgreint, en aldrei er hægt að vinna eitthvað með úttkomuna úr útreikningnum, það sem er gert er annað hvort ekkert eða úttkoman er prentuð.
Það dugar okkur ekki ef við þurfum að nota útreikninginn að þurfa að horfa á það sem vélin skrifar út og skrifa það handvirkt inn sjálf.
Það sem við viljum geta sagt er ,,hey reiknaðu þetta út og notaðu það svo hér, mér er alveg sama hvað það er því að ég treysti því að þú hafir gert það rétt.''
Því að við manngerum tölvuna að sjálfsögðu, hvað gæti farið úrskeiðis?

Til þess að geta nýtt þessa virkni þurfum við að læra nýtt lykilorð sem er \textbf{return} sem þýðir skila, mjög gagnsætt og gott lykilorð (eins og flest lykilorðin sem við höfum séð hingað til, að mati höfundar).
Það sem lykilorðið gerir er svipað break lykilorðinu, þegar vélin kemur að línu þar sem return kemur fram þá gerir fallið ekkert meira en að skila því sem beðið er um og vélin heldur áfram í næstu línu frá því kallað var í fallið.
Sjáum í kóðabút \ref{lst:foll-skilagildi}

\begin{lstlisting}[caption=Hvernig á að láta fall skila gildi með return skipuninni, label=lst:foll-skilagildi]
def hefja_i_veldi_og_deila(grunntala,veldisvisir,deiling = deiling):	
	return grunntala**veldisvisir/deiling
	
# nú höfum við séð mýgrút leiða til að kalla í fallið svo við ætlum að einbeita okkur að því hvernig megi nota það sem fallið skilar í stað þess hvernig eigi að kalla í það með mismunandi viðföngum.
# Athugum að  hefja_i_veldi_og_deila(2, 2, 2) skilar okkur 2

tala = fall(2,2,2)
print(tala)
# hér verður úttakið 2

utreikningur = fall(2,2,2) * 4
print(utreikning)
# hér verður úttakið 8

breyta = utreikningur * tala
print(breyta)
# hér verður úttakið 16
\end{lstlisting}
 
Nú höfum við skilað einu gildi sem er heiltala eða fleytitala og unnið með hana með þeim aðgerðum og reiknivirkjum sem okkur langaði til að prófa.
Hægt er að skila gögnum af hvaða týpu sem er, og jafnvel fleiru en einu gildi í einu, og það af mismunandi týpum.

Sjáum í kóðabút \ref{lst:foll-ndir-skilagildi} hvernig hægt er að skila mörgum gildum og setja þau í breytu eða breytur.

\begin{lstlisting}[caption=Hvernig á að skila mörgum gildum, label=lst:foll-ndir-skilagildi]
def skilum_morgum_gildum(strengur, tala, listi):
	# Þetta fall tekur við streng, tölu og lista
	# Fallið skilar tveimur tölum og listanum aftur óbreyttum
	# Fyrri talan er hversu oft strengurinn í viðfanginu kom fyrir í listanum
	# Seinni talan er hversu margar tölur í listanum eru stærri en talan í viðfanginu
	
	skilatala = 0
	strengja_talning = 0
	for x in listi:
		# x stendur það stak sem verið er skoða úr listanum listi
		if x == strengur:
			strengja_talning +=1
		if(type(x) == int or type(x) == float ):
			if (tala < x):
				skilatala += 1
	return strengja_talning, skilatala,  listi
	
# hér gerist ekkert nema að við köllum í fallið
skilum_morgum_gildum("halló", 2, ["halló", "bless", 11, 6])
# Þetta skilar okkur úttakinu
(1, 2, ["halló", "bless", 11, 6])

# En ef okkur langar ekki að fá út n-d þá getum við gert dálitla töfra 
talning_strengs, staerri_tolur, listinn = skilum_morgum_gildum("halló", 2, ["halló", "bless", 11, 6])

# Nú fáum við ekkert úttak en breyturnar innihalda 1, 2 og ["halló", "bless", 11, 6] í þessari röð

# Við getum ekki notað fleiri en eina breytu nema að fjöldi þeirra passi við fjölda skilagilda:
a, b = skilum_morgum_gildum("halló", 2, ["halló", "bless", 11, 6])

# þetta veldur villu því annað hvort er í boði að hafa eina breytu sem inniheldur n-d eða þrjár breytur sem taka hver við sínu skilagildi.
\end{lstlisting}

\section{Lokun}

Föll mega innihalda önnur föll, athugum það sem við fórum yfir í kafla \ref{uk:gildissvið}, þessi föll geta verið gagnleg til að útfæra útreikning sem er svo notaður oft innan fallsins.
Sjáum dæmi í kóðabút \ref{lst:foll-innri-foll}, athugið sérstaklega gildissviðið því að í innra fallinu er vísað í viðfang sem heitir strengur og það er líka vísað í viðfang í ytra fallinu sem heitir strengur, en vegna þess að gildissviðið krefst þess að fyrst er athugað staðvært hvernig breytan er skilgreind þá skiptir ekki máli að breyturnar heita það sama.

\begin{lstlisting}[caption=Innri föll kynnt, label=lst:foll-innri-foll]
def breyta_strengjum(strengur):
	# þetta fall tekur við streng og skilar honum eftir að hafa breytt honum einhvern veginn
	
	def fremsti_stafur_er_nuna_aftastur(strengur):
		# þetta fall tekur við streng og lætur fremsta stafinn í honum aftast og aftasta stafinn fremst og skilar breytingunni 
		# ef strengurinn er eitt eða færra stafabil gerir fallið ekkert við strenginn og skilar honum óbreyttum
		if(len(strengur > 2)):
			fremst = strengur[0]
			aftast = strengur[-1]
			strengur = aftast + strengur[1:-1] + fremst
			return strengur
		else:
			return strengur
			
	# nú er skilgreiningin á innra fallinu búin og við erum stödd í ytra fallinu
	# nú getum við kallað í innra fallið
	
	skilastrengur = fremsti_stafur_er_nuna_aftastur(strengur)
	return skilastrengur
	
# Nú getum við kallað í ytra fallið
strengur = breyta_strengjum("halló")
# strengur inniheldur núna
# "óllah"

# En ytra fallið gerði samt eiginlega ekki neitt, hvers vegna erum við að nota það en ekki innra fallið?
strengur =  fremsti_stafur_er_nuna_aftastur("halló")

# hér fáum við villu því að það er ekkert fall til, í því gildissviði sem við erum stödd, sem heitir þessu nafni sem við höfum aðgang að, þess vegna verðum við að nota ytra fallið.
		
\end{lstlisting}

Nú höfum við séð hvernig megi skilgreina innri föll og það sem við ætlum að skoða næst er að það má skila föllum.
Skipunin return er þá notuð alveg eins og ef við værum að skila einu gildi, eða fleirum.
Sjáum í kóðabút \ref{lst:foll-lokun} hvernig við skilum falli og hvernig á að nota skilagildið sem inniheldur fallið.
Við sjáum í seinni hluta þessarar bókar, í umfjöllun um klasa, hvernig megi framkvæma sömu virkni en með því að sleppa klösum þá er vinnslutíminn umtalsvert minni.
Svo ef það skiptir máli að gera eitthvað hratt sem má leysa með lokun þá ætti frekar að beita henni heldur en klösum.

\begin{lstlisting}[caption=Lokun kynnt, label=lst:foll-lokun]
def prentunarfall(strengur):
	# prentunarfall tekur við einu viðfangi
	# prentunarfall skilar falli sem prentar þann streng ásamt viðbót
	def prentum():
		# prentum tekur ekki við neinu en notar viðfangið úr ytra fallinu
		# prentum skilar strengnum úr viðfanginu ásamt viðskeytingunni 'hér er viðbót af akademískri ástæðu'
		return str(strengur) + " hér er viðbót af akademískri ástæðu"
	return prentum

a = prentunarfall('halló heimur')
print(a) # skilar okkur að a sé fall sem sé geymt í einhverju minnishólfi
print(a()) # nú köllum við í fallið a sem skilar okkur úttakinu 'halló heimur hér er viðbót af akademískri ástæðu'

# Við megum svo nota prentunarfallið okkar aftur með einhverju öðru viðfangi
b = prentunarfall('nýr strengur')
print(b()) # skilar okkur úttakinu 'nýr strengur hér er viðbót af akademískri ástæðu'

# Sjáum ögn haldbærari notkun

def niðurtalning(n):
	# niðurtalning tekur við tölu
	# niðurtalning skilar falli sem telur niður úr þeirri tölu
	
	def teljari():
		# nú lendum við í vandræðum með n, þar sem við höfum ekki aðgang að því hérna 
		# og við lögum það með því að nota lykilorðið nonlocal (eða óstaðvært) til að segja vélinni að leita annarsstaðar að gildi fyrir n
		nonlocal n
		while(n>-1):
			print(n)
			n -= 1
	
	return teljari
	
# nú getum við skilgreint fall sem telur niður frá 10 og notað það þegar okkur hentar
teljum_fra_tiu = niðurtalning(5)

# nú hentar okkur að nota það:
teljum_fra_fimm()
# það skilar okkur úttakinu
# 5
# 4
# 3
# 2
# 1
# 0
\end{lstlisting}

Tökum eftir að í skilgreiningum á a og b í kóðabút \ref{lst:foll-lokun} þá erum við að nota ákveðinn streng sem þau eiga að prenta út.
Þetta er á þessu stigi málsins eilítið óhlutstætt og ekki augljóst hvernig það nýtist okkur því dæmið í kóðabútnum er ekki sérlega nothæft fall.
Niðurtalningarfallið hinsvegar er að framkvæma einhverja virkni sem við viljum hafa aðgang að þegar okkur hentar.
Við notuðum breytuna teljum\_fra\_fimm til þess að geyma fyrir okkur að kalla í fallið niðurtalning() með viðfanginu 5, svo þegar okkur hentar þá getum við beitt fallinu sem telur niður fyrir okkur.
Athugum þó sérstaklega að gildissviðið sem innrafallið teljari() tilheyrir það hefur ekki aðgang að neinu staðværu n-i svo það skilar villu nema að við segjum því falli sérstaklega að nota ekki staðvært n heldur leita út fyrir gildissviðið með lykilorðinu \textbf{nonlocal}.
Við munum ekki nota það orð af neinu viti í seinni hluta bókarinnar en það er þess virði að taka það fram að svo stöddu að þetta orð sé til og hvað það gerir.